(function(){function j(a){throw a;}var k=void 0,n=!0,p=null,r=!1;function aa(){return function(){}}function s(a){return function(){return this[a]}}function ba(a){return function(){return a}}var t,v=this;function ca(a){a=a.split(".");for(var b=v,c;c=a.shift();)if(b[c]!=p)b=b[c];else return p;return b}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function w(a){return a!==k}function x(a){return"array"==da(a)}function ea(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){return"string"==typeof a}function A(a){return"boolean"==typeof a}function B(a){return"number"==typeof a}function fa(a){return"function"==da(a)}function C(a){var b=typeof a;return"object"==b&&a!=p||"function"==b}function ia(a){return a[ja]||(a[ja]=++ka)}
var ja="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){a||j(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function na(a,b,c){na=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return na.apply(p,arguments)}function oa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var pa=Date.now||function(){return+new Date};
function D(a,b){var c=a.split("."),d=v;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&w(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function F(a,b){function c(){}c.prototype=b.prototype;a.ba=b.prototype;a.prototype=new c};function qa(a){Error.captureStackTrace?Error.captureStackTrace(this,qa):this.stack=Error().stack||"";a&&(this.message=String(a))}F(qa,Error);qa.prototype.name="CustomError";function ra(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function sa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;
function Aa(a){return sa(a.replace(/  /g," &#160;"),k)}function Ba(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ca={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Da={"'":"\\'"};
function G(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Ca[d])){if(!(31<e&&127>e))if(d in Da)d=Da[d];else if(d in Ca)d=Da[d]=Ca[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Da[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Ea(a,b){b.unshift(a);qa.call(this,ra.apply(p,b));b.shift()}F(Ea,qa);Ea.prototype.name="AssertionError";function Fa(a,b){j(new Ea("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))}function Ga(a,b,c){if(!A(a)){var d=[da(a),a],e=Array.prototype.slice.call(arguments,2),f="Assertion failed";b?(f+=": "+b,d=e):f+=": Expected boolean but got %s: %s.";j(new Ea(""+f,d||[]))}};var Ha=Array.prototype,Ja=Ha.indexOf?function(a,b,c){return Ha.indexOf.call(a,b,c)}:function(a,b,c){c=c==p?0:0>c?Math.max(0,a.length+c):c;if(y(a))return!y(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ka=Ha.forEach?function(a,b,c){Ha.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},La=Ha.map?function(a,b,c){return Ha.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?
a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Na=Ha.some?function(a,b,c){return Ha.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return r};function Oa(a,b){var c=Pa(a,b,k);return 0>c?p:y(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Qa(a){if(!x(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ra(a,b){var c=Ja(a,b);0<=c&&Ha.splice.call(a,c,1)}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ta(a,b,c,d){Ha.splice.apply(a,Ua(arguments,1))}function Ua(a,b,c){return 2>=arguments.length?Ha.slice.call(a,b):Ha.slice.call(a,b,c)}function Va(a,b){return a>b?1:a<b?-1:0};function Wa(a,b){for(var c=ea(b),d=c?b:arguments,c=c?0:1;c<d.length&&!(a=a[d[c]],!w(a));c++);return a}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ya(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Xa.length;f++)c=Xa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Za,$a,ab,bb;function cb(){return v.navigator?v.navigator.userAgent:p}bb=ab=$a=Za=r;var db;if(db=cb()){var eb=v.navigator;Za=0==db.indexOf("Opera");$a=!Za&&-1!=db.indexOf("MSIE");ab=!Za&&-1!=db.indexOf("WebKit");bb=!Za&&!ab&&"Gecko"==eb.product}var fb=Za,H=$a,gb=bb,hb=ab,ib;
a:{var jb="",kb;if(fb&&v.opera)var lb=v.opera.version,jb="function"==typeof lb?lb():lb;else if(gb?kb=/rv\:([^\);]+)(\)|;)/:H?kb=/MSIE\s+([^\);]+)(\)|;)/:hb&&(kb=/WebKit\/(\S+)/),kb)var mb=kb.exec(cb()),jb=mb?mb[1]:"";if(H){var nb,ob=v.document;nb=ob?ob.documentMode:k;if(nb>parseFloat(jb)){ib=String(nb);break a}}ib=jb}var pb={};
function qb(a){var b;if(!(b=pb[a])){b=0;for(var c=String(ib).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",m=/(\d*)(\D*)/g,l=/(\d*)(\D*)/g;do{var q=m.exec(g)||["","",""],u=l.exec(h)||["","",""];if(0==q[0].length&&0==u[0].length)break;b=((0==q[1].length?0:parseInt(q[1],10))<(0==u[1].length?0:parseInt(u[1],10))?-1:(0==q[1].length?0:parseInt(q[1],10))>(0==u[1].length?
0:parseInt(u[1],10))?1:0)||((0==q[2].length)<(0==u[2].length)?-1:(0==q[2].length)>(0==u[2].length)?1:0)||(q[2]<u[2]?-1:q[2]>u[2]?1:0)}while(0==b)}b=pb[a]=0<=b}return b}var rb={};function sb(){return rb[9]||(rb[9]=H&&!!document.documentMode&&9<=document.documentMode)};function tb(a){return ub(a||arguments.callee.caller,[])}
function ub(a,b){var c=[];if(0<=Ja(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(vb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=vb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(ub(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function vb(a){if(wb[a])return wb[a];a=String(a);if(!wb[a]){var b=/function ([^\(]+)/.exec(a);wb[a]=b?b[1]:"[Anonymous]"}return wb[a]}var wb={};function zb(a,b,c,d,e){"number"==typeof e||Ab++;this.i=d||pa();this.f=a;this.d=b;this.c=c;delete this.b;delete this.a}zb.prototype.b=p;zb.prototype.a=p;var Ab=0;function Bb(a){this.i=a}Bb.prototype.c=p;Bb.prototype.b=p;Bb.prototype.d=p;Bb.prototype.a=p;function Cb(a,b){this.name=a;this.value=b}Cb.prototype.toString=s("name");var Db=new Cb("SHOUT",1200),Eb=new Cb("SEVERE",1E3),Fb=new Cb("WARNING",900),Gb=new Cb("INFO",800),Hb=new Cb("CONFIG",700),Ib=new Cb("FINE",500),Jb=new Cb("FINER",400),Kb=new Cb("FINEST",300),Lb=[new Cb("OFF",Infinity),Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,new Cb("ALL",0)],Mb=p;
function Nb(a){if(a.b)return a.b;if(a.c)return Nb(a.c);Fa("Root logger has no level set.");return p}Bb.prototype.log=function(a,b,c){if(a.value>=Nb(this).value){a=this.f(a,b,c);b="log:"+a.d;v.console&&(v.console.timeStamp?v.console.timeStamp(b):v.console.markTimeline&&v.console.markTimeline(b));v.msWriteProfilerMark&&v.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=k;f=c.a[e];e++)f(d);b=b.c}}};
Bb.prototype.f=function(a,b,c){var d=new zb(a,String(b),this.i);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=ca("window.location.href");if(y(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var m,l,q=r;try{m=c.lineNumber||c.Hc||"Not available"}catch(u){m="Not available",q=n}try{l=c.fileName||c.filename||c.sourceURL||h}catch(z){l="Not available",q=n}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:m,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+ua(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ua(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ua(tb(f)+"-> ")}catch(E){e="Exception trying to expose exception! You win, we lose. "+E}d.a=e}return d};function Ob(a,b){a.log(Eb,b,k)}function I(a,b){a.log(Fb,b,k)}function Pb(a,b){a.log(Jb,b,k)}function J(a,b){a.log(Kb,b,k)}var Qb={},Rb=p;
function Sb(){Rb||(Rb=new Bb(""),Qb[""]=Rb,Rb.b=Hb)}function Tb(){Sb();return Rb}function K(a){Sb();var b;if(!(b=Qb[a])){b=new Bb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=K(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;Qb[a]=b}return b};var Ub=new function(){this.a=pa()};function Vb(a){this.d=a||"";this.f=Ub}Vb.prototype.a=n;Vb.prototype.b=r;function Wb(a){a=new Date(a.i);return Xb(a.getFullYear()-2E3)+Xb(a.getMonth()+1)+Xb(a.getDate())+" "+Xb(a.getHours())+":"+Xb(a.getMinutes())+":"+Xb(a.getSeconds())+"."+Xb(Math.floor(a.getMilliseconds()/10))}function Xb(a){return 10>a?"0"+a:String(a)}function Yb(a,b){var c=(a.i-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Zb(a){Vb.call(this,a)}F(Zb,Vb);Zb.prototype.b=n;
Zb.prototype.c=function(a){var b;switch(a.f.value){case Db.value:b="dbg-sh";break;case Eb.value:b="dbg-sev";break;case Fb.value:b="dbg-w";break;case Gb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.d," ");this.a&&c.push("[",Wb(a),"] ");c.push("[",Aa(Yb(a,this.f.a)),"s] ");c.push("[",ua(a.c),"] ");c.push('<span class="',b,'">',sa(Aa(ua(a.d))));this.b&&a.b&&c.push("<br>",sa(Aa(a.a||"")));c.push("</span><br>");return c.join("")};function $b(a){Vb.call(this,a)}F($b,Vb);
$b.prototype.c=function(a){var b=[];b.push(this.d," ");this.a&&b.push("[",Wb(a),"] ");b.push("[",Yb(a,this.f.a),"s] ");b.push("[",a.c,"] ");b.push(a.d,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function ac(){this.f=na(this.i,this);this.a=new $b;this.a.a=r;this.b=this.a.b=r;this.c="";this.d={}}ac.prototype.i=function(a){if(!this.d[a.c]){var b=this.a.c(a);if(bc)switch(a.f){case Db:cc("info",b);break;case Eb:cc("error",b);break;case Fb:cc("warn",b);break;default:cc("debug",b)}else window.opera?window.opera.postError(b):this.c+=b}};var bc=window.console;function cc(a,b){var c=bc;if(c[a])c[a](b);else c.log(b)};var dc,ec=!H||sb();!gb&&!H||H&&sb()||gb&&qb("1.9.1");H&&qb("9");function fc(a,b){var c;c=a.className;c=y(c)&&c.match(/\S+/g)||[];for(var d=Ua(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ja(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var gc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function hc(a){this.a=a||v.document||document}function ic(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
hc.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!ec&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var h={};Ya(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);if(g)if(y(g))f.className=g;else if(x(g))fc.apply(p,[f].concat(g));else{var m=f,h=function(a,b){"style"==b?m.style.cssText=a:"class"==b?m.className=a:"for"==b?m.htmlFor=a:b in gc?m.setAttribute(gc[b],a):0==b.lastIndexOf("aria-",
0)||0==b.lastIndexOf("data-",0)?m.setAttribute(b,a):m[b]=a},l;for(l in g)h.call(k,g[l],l)}if(2<e.length){var q=d,u=f,d=e,e=function(a){a&&u.appendChild(y(a)?q.createTextNode(a):a)};for(l=2;l<d.length;l++)if(g=d[l],ea(g)&&!(C(g)&&0<g.nodeType)){var h=Ka,z;a:{if((z=g)&&"number"==typeof z.length){if(C(z)){z="function"==typeof z.item||"string"==typeof z.item;break a}if(fa(z)){z="function"==typeof z.item;break a}}z=r}h(z?Sa(g):g,e)}else e(g)}return f};
hc.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function jc(a){this.f=na(this.i,this);this.b=new Zb;this.c=this.b.a=r;this.a=a;this.d=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new hc(9==a.nodeType?a:a.ownerDocument||a.document):dc||(dc=new hc),c=p;H?(a=c=b.a.createStyleSheet(),H?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=ic(b,"head")[0],a||(c=ic(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),H?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
jc.prototype.i=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";c.innerHTML=this.b.c(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};jc.prototype.clear=function(){this.a.innerHTML=""};var kc=p,lc=p;D("ydn.debug.log",function(a,b,c){if(B(b))b=new Cb("log",b);else if(y(b)){b=b.toUpperCase();if(!Mb){Mb={};for(var d=0,e;e=Lb[d];d++)Mb[e.value]=e,Mb[e.name]=e}b=Mb[b]||p}else b=Ib;K(a||"ydn").b=b;if(w(c))lc||(a=lc=new jc(c),n!=a.c&&(c=Tb(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.c=n),Tb().b=Fb);else if(!kc||!lc)a=kc=new ac,n!=a.b&&(c=Tb(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.b=n),Tb().b=Fb});/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function L(a,b){this.c=[];this.i=a;this.o=b||p}t=L.prototype;t.$=r;t.Aa=r;t.Ha=0;t.Cb=r;t.hc=r;t.jb=0;function mc(a,b){if(a.$)a.b instanceof L&&mc(a.b);else{if(a.a){var c=a.a;delete a.a;b?mc(c,b):(c.jb--,0>=c.jb&&mc(c))}a.i?a.i.call(a.o,a):a.Cb=n;a.$||a.e(new nc)}}t.Jb=function(a,b){oc(this,a,b);this.Ha--;0==this.Ha&&this.$&&pc(this)};function oc(a,b,c){a.$=n;a.b=c;a.Aa=!b;pc(a)}function qc(a){a.$&&(a.Cb||j(new rc),a.Cb=r)}function M(a,b){qc(a);oc(a,n,b)}t.e=function(a){qc(this);oc(this,r,a)};
t.X=function(a,b){return this.S(a,p,b)};t.Oa=function(a,b){return this.S(p,a,b)};t.S=function(a,b,c){this.c.push([a,b,c]);this.$&&pc(this);return this};function sc(a){return Na(a.c,function(a){return fa(a[1])})}
function pc(a){a.f&&(a.$&&sc(a))&&(v.clearTimeout(a.f),delete a.f);a.a&&(a.a.jb--,delete a.a);for(var b=a.b,c=r,d=r;a.c.length&&0==a.Ha;){var e=a.c.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Aa?g:f)try{var h=f.call(e||a.o,b);w(h)&&(a.Aa=a.Aa&&(h==b||h instanceof Error),a.b=b=h);b instanceof L&&(d=n,a.Ha++)}catch(m){b=m,a.Aa=n,sc(a)||(c=n)}}a.b=b;d&&a.Ha&&(b.S(na(a.Jb,a,n),na(a.Jb,a,r)),b.hc=n);c&&(a.f=v.setTimeout(function(){j(b)},0))}function tc(a){var b=new L;M(b,a);return b}
function rc(){qa.call(this)}F(rc,qa);rc.prototype.message="Deferred has already fired";rc.prototype.name="AlreadyCalledError";function nc(){qa.call(this)}F(nc,qa);nc.prototype.message="Deferred was cancelled";nc.prototype.name="CancelledError";function uc(){0!=vc&&ia(this)}var vc=0;!H||sb();var wc=!H||sb(),xc=H&&!qb("9");!hb||qb("528");gb&&qb("1.9b")||H&&qb("8")||fb&&qb("9.5")||hb&&qb("528");gb&&!qb("8")||H&&qb("9");function yc(a,b){this.type=a;this.a=this.target=b}yc.prototype.b=r;yc.prototype.c=n;yc.prototype.qb=function(){this.c=r};function zc(a){zc[" "](a);return a}zc[" "]=aa();function Ac(a,b){a&&Cc(this,a,b)}F(Ac,yc);t=Ac.prototype;t.target=p;t.clientX=0;t.clientY=0;t.Lb=p;function Cc(a,b,c){var d=a.type=b.type;yc.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&gb)try{zc(c.nodeName)}catch(e){}a.clientX=b.clientX!==k?b.clientX:b.pageX;a.clientY=b.clientY!==k?b.clientY:b.pageY;a.Lb=b;b.defaultPrevented&&a.qb();delete a.b}
t.qb=function(){Ac.ba.qb.call(this);var a=this.Lb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,xc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};function Dc(){}var Ec=0;Dc.prototype.key=0;Dc.prototype.ra=r;Dc.prototype.a=r;Dc.prototype.handleEvent=function(a){return this.b?this.Fa.call(this.rb||this.src,a):this.Fa.handleEvent.call(this.Fa,a)};var Fc={},Gc={},Hc={},Ic={};
function Jc(a,b,c,d,e){if(b)if(x(b))for(var f=0;f<b.length;f++)Jc(a,b[f],c,d,e);else{d=!!d;var g=Gc;b in g||(g[b]={I:0,F:0});g=g[b];d in g||(g[d]={I:0,F:0},g.I++);var g=g[d],h=ia(a),m;g.F++;if(g[h]){m=g[h];for(f=0;f<m.length;f++)if(g=m[f],g.Fa==c&&g.rb==e){if(g.ra)break;return}}else m=g[h]=[],g.I++;var l=Kc,q=wc?function(a){return l.call(q.src,q.key,a)}:function(a){a=l.call(q.src,q.key,a);if(!a)return a},f=q;f.src=a;var u=g=new Dc;fa(c)?u.b=n:c&&c.handleEvent&&fa(c.handleEvent)?u.b=r:j(Error("Invalid listener argument"));
u.Fa=c;u.c=f;u.src=a;u.type=b;u.capture=!!d;u.rb=e;u.a=r;u.key=++Ec;u.ra=r;c=g.key;f.key=c;m.push(g);Fc[c]=g;Hc[h]||(Hc[h]=[]);Hc[h].push(g);a.addEventListener?(a==v||!a.Kb)&&a.addEventListener(b,f,d):a.attachEvent(b in Ic?Ic[b]:Ic[b]="on"+b,f)}else j(Error("Invalid event type"))}
function Lc(a,b,c,d,e){if(x(b))for(var f=0;f<b.length;f++)Lc(a,b[f],c,d,e);else{d=!!d;a:{f=Gc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ia(a),f[a]))){a=f[a];break a}a=p}if(a)for(f=0;f<a.length;f++)if(a[f].Fa==c&&a[f].capture==d&&a[f].rb==e){Mc(a[f].key);break}}}
function Mc(a){if(Fc[a]){var b=Fc[a];if(!b.ra){var c=b.src,d=b.type,e=b.c,f=b.capture;c.removeEventListener?(c==v||!c.Kb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Ic?Ic[d]:Ic[d]="on"+d,e);c=ia(c);Hc[c]&&(e=Hc[c],Ra(e,b),0==e.length&&delete Hc[c]);b.ra=n;if(b=Gc[d][f][c])b.Vb=n,Nc(d,f,c,b);delete Fc[a]}}}
function Nc(a,b,c,d){if(!d.Xa&&d.Vb){for(var e=0,f=0;e<d.length;e++)d[e].ra?d[e].c.src=p:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Vb=r;0==f&&(delete Gc[a][b][c],Gc[a][b].I--,0==Gc[a][b].I&&(delete Gc[a][b],Gc[a].I--),0==Gc[a].I&&delete Gc[a])}}function Oc(a,b,c,d,e){var f=1;b=ia(b);if(a[b]){a.F--;a=a[b];a.Xa?a.Xa++:a.Xa=1;try{for(var g=a.length,h=0;h<g;h++){var m=a[h];m&&!m.ra&&(f&=Pc(m,e)!==r)}}finally{a.Xa--,Nc(c,d,b,a)}}return Boolean(f)}function Pc(a,b){a.a&&Mc(a.key);return a.handleEvent(b)}
function Kc(a,b){if(!Fc[a])return n;var c=Fc[a],d=c.type,e=Gc;if(!(d in e))return n;var e=e[d],f,g;if(!wc){f=b||ca("window.event");var h=n in e,m=r in e;if(h){if(0>f.keyCode||f.returnValue!=k)return n;a:{var l=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(q){l=n}if(l||f.returnValue==k)f.returnValue=n}}l=new Ac;Cc(l,f,this);f=n;try{if(h){for(var u=[],z=l.a;z;z=z.parentNode)u.push(z);g=e[n];g.F=g.I;for(var E=u.length-1;!l.b&&0<=E&&g.F;E--)l.a=u[E],f&=Oc(g,u[E],d,n,l);if(m){g=e[r];g.F=g.I;for(E=0;!l.b&&
E<u.length&&g.F;E++)l.a=u[E],f&=Oc(g,u[E],d,r,l)}}else f=Pc(c,l)}finally{u&&(u.length=0)}return f}d=new Ac(b,this);return f=Pc(c,d)};function Qc(){uc.call(this)}F(Qc,uc);Qc.prototype.Kb=n;Qc.prototype.addEventListener=function(a,b,c,d){Jc(this,a,b,c,d)};Qc.prototype.removeEventListener=function(a,b,c,d){Lc(this,a,b,c,d)};
function Rc(a,b){var c=b,d=c.type||c,e=Gc;if(d in e){if(y(c))c=new yc(c,a);else if(c instanceof yc)c.target=c.target||a;else{var f=c,c=new yc(d,a);Ya(c,f)}var f=1,g,e=e[d],d=n in e,h;if(d){g=[];for(h=a;h;h=p)g.push(h);h=e[n];h.F=h.I;for(var m=g.length-1;!c.b&&0<=m&&h.F;m--)c.a=g[m],f&=Oc(h,g[m],c.type,n,c)&&c.c!=r}if(r in e)if(h=e[r],h.F=h.I,d)for(m=0;!c.b&&m<g.length&&h.F;m++)c.a=g[m],f&=Oc(h,g[m],c.type,r,c)&&c.c!=r;else for(e=a;!c.b&&e&&h.F;e=p)c.a=e,f&=Oc(h,e,c.type,r,c)&&c.c!=r}};L.prototype.done=L.prototype.X;L.prototype.fail=L.prototype.Oa;L.prototype.then=L.prototype.S;Qc.prototype.addEventListener=Qc.prototype.addEventListener;var Sc=v.window||v.self;function Tc(a,b,c){fa(a)?c&&(a=na(a,c)):a&&"function"==typeof a.handleEvent?a=na(a.handleEvent,a):j(Error("Invalid listener argument"));2147483647<b||Sc.setTimeout(a,b||0)};function Uc(a,b,c,d,e,f){L.call(this,e,f);this.J=a;this.d=[];this.n=!!b;this.wb=!!c;this.Va=!!d;for(b=0;b<a.length;b++)a[b].S(na(this.u,this,b,n),na(this.u,this,b,r));0==a.length&&!this.n&&M(this,this.d)}F(Uc,L);Uc.prototype.pa=0;Uc.prototype.u=function(a,b,c){this.pa++;this.d[a]=[b,c];this.$||(this.n&&b?M(this,[a,c]):this.wb&&!b?this.e(c):this.pa==this.J.length&&M(this,this.d));this.Va&&!b&&(c=p);return c};Uc.prototype.e=function(a){Uc.ba.e.call(this,a);Ka(this.J,function(a){mc(a)})};D("ydn.async.all",function(a){for(var b=[],c,d=0;c=a[d];d++){var e=new L;c.success(oa(function(a,b){M(a,b)},e));c.error(oa(function(a,b){a.e(b)},e));b[d]=e}return new Uc(b)});var Vc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Wc=v.webkitIDBRequest&&"LOADING"in v.webkitIDBRequest?v.webkitIDBTransaction||v.IDBTransaction:Vc,N=Wc.READ_ONLY,Xc=Wc.READ_WRITE,Yc=Wc.VERSION_CHANGE;function Zc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function $c(a,b,c){var d;C(a)?(d=a.store,b=a.id,a.parent!=p&&(c=new $c(a.parent))):w(b)?d=a:(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new $c(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],w(b)||j(Error("Invalid key value: "+a)));this.a=d;this.id=b;this.b=c||p}t=$c.prototype;t.toJSON=function(){var a={store:this.a,id:this.id};this.b&&(a.parent=this.b.toJSON());return a};t.valueOf=function(){return(this.b?this.b.valueOf()+"^|":"")+this.a+"^:"+this.id};
t.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};t.Cc=s("a");t.jc=s("id");t.Bc=s("b");var ad={};
function bd(a){a=[a];for(var b=new cd,c=0,d,e;(e=a.pop())!==k;){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(ad);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),dd(b,e);else if(e instanceof Date)c+=2,b.write(c),dd(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>2|255,
(f|3)<<6)}c.write(0)}else if(e===ad)b.write(0);else return"";c=0}return b.trim().toString()}
function dd(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function ed(a){var b=a.ha()|0,c=b>>7?r:n,d=c?-1:1,e=(b&127)<<4,b=a.ha()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.ha()|0):a.ha()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function fd(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.ha();if(0===f||f==p)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function gd(a){this.a=p;var b=a.length-1,c=-1;this.ha=function(){return this.a=c<b?parseInt(a[++c]+a[++c],16):p}}
function cd(){var a=[],b;this.write=function(c){for(var d=0;d<arguments.length;d++)b=arguments[d].toString(16),a.push(2===b.length?b:b="0"+b)};this.toString=function(){return a.length?a.join(""):p};this.trim=function(){for(var b=a.length;"00"===a[--b];);a.length=++b;return this}};function hd(a,b,c,d,e){!w(a)&&w(e)&&(a=e);ea(a)?(a=La(a,function(a){return a}),w(e)||(e=a.join(", "))):y(a)||j(new O("index keyPath or name required."));this.keyPath=a;this.name=w(e)?e:this.keyPath;this.type=id(b);this.type!=b&&j(new O("Invalid index type: "+b+" in "+this.name));this.unique=!!c;this.multiEntry=!!d}var jd=String.fromCharCode(31);
function kd(a,b){if(x(b)){var c=a==p?[""]:x(a)?a:[a],d=c[0]instanceof Date?"d":B(c[0])?"n":"t",c="d"==d?c.reduce(function(a,b){return a+ +b},""):c.join(jd);return d+jd+c+jd}if("DATE"==b){if(a instanceof Date)return+a}else return w(b)?a:"X'"+bd(a)+"'"}
function ld(a,b){if(x(b)){var c=a.split(jd),d=c[0],c=c.slice(1,c.length-1);return La(c,function(a){return"d"==d?new Date(parseInt(a,10)):"n"==d?parseFloat(a):a})}if("DATE"==b)c=new Date(a);else if(w(b))c=a;else{for(var e=c=[],f,g=[],h,m,l=new gd(a);l.ha()!=p;)if(0===l.a)e=g.pop();else{if(l.a===p)break;do{h=l.a/4|0;f=l.a%4;for(var q=0;q<h;q++)m=[],e.push(m),g.push(e),e=m;if(0===f&&12<l.a+4)l.ha();else break}while(1);1===f?e.push(ed(l)):2===f?e.push(new Date(ed(l))):3===f?e.push(fd(l)):0===f&&(e=g.pop())}c=
c[0]}return c}var md=["BLOB","DATE","INTEGER","NUMERIC","TEXT"];function id(a){if(x(a))return a.map(function(a){return id(a)});a=Ja(md,a);return md[a]}hd.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
function nd(a,b,c,d,e,f){this.name=a;y(this.name)||j(new O("store name must be a string"));this.keyPath=w(b)?b:p;this.keyPath!==p&&(!y(this.keyPath)||x(this.keyPath))&&j(new O("keyPath must be a string or array"));this.autoIncrement=c;var g;w(d)&&(g=id(d),w(g)||j(new O("type invalid in store: "+this.name)));this.type=w(g)?g:this.autoIncrement?"INTEGER":k;this.a=y(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.b=!!f}
nd.prototype.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function od(a){var b="name keyPath autoIncrement type indexes dispatchEvents".split(" "),c;for(c in a)a.hasOwnProperty(c)&&-1==Ja(b,c)&&j(new O('Unknown attribute "'+c+'"'));b=[];c=a.indexes||[];if(x(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f=["name","unique","type","keyPath","multiEntry"],g=k;for(g in e)e.hasOwnProperty(g)&&-1==Ja(f,g)&&j(new O("Unknown field: "+g+" in "+JSON.stringify(e)));e=new hd(e.keyPath,e.type,e.unique,e.multiEntry,e.name);w(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new nd(a.name,
a.keyPath,a.autoIncrement,a.type,b,a.dispatchEvents)}nd.prototype.index=function(a){return this.indexes[a]||p};function pd(a,b){return Oa(a.indexes,function(a){return a.name==b})}function qd(a,b){return b==a.keyPath?n:Na(a.indexes,function(a){return a.name==b})}function rd(a){return y(a.keyPath)?G(a.keyPath):k}function sd(a){return y(a.keyPath)?G(a.keyPath):"_ROWID_"}function td(a){return y(a.keyPath)?a.keyPath:"_ROWID_"}function ud(a){return G(a.name)}
function vd(a,b,c){var d=[];c=w(c)?c:y(a.keyPath)?Wa(b,a.a):k;var e=[];w(c)&&(e=a.keyPath!=p?[rd(a)]:["_ROWID_"],d=[kd(c,a.type)]);for(var f=0;f<a.indexes.length;f++)if(!(a.indexes[f].name==a.keyPath||"_default_"==a.indexes[f].name)){var g=b[a.indexes[f].name];w(g)&&(d.push(kd(g,a.indexes[f].type)),e.push(G(a.indexes[f].name)))}var f={},h;for(h in b)b.hasOwnProperty(h)&&!qd(a,h)&&(f[h]=b[h]);d.push(JSON.stringify(f));e.push("_default_");a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Ib:e,Xb:a,ab:d,
key:c}}
function xd(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;if(a.keyPath!=b.keyPath)return"keyPath, expect:  "+a.keyPath+", but: "+b.keyPath;if(w(a.autoIncrement)&&w(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(w(a.type)&&w(b.type)&&a.type!=
b.type)return"data type, expect:  "+a.type+", but: "+b.type;for(var c=0;c<a.indexes.length;c++){var d=pd(b,a.indexes[c].name),d=!d?"no index for "+a.indexes[c].name:a.indexes[c].name!=d.name?"name, expect: "+a.indexes[c].name+", but: "+d.name:!yd(a.indexes[c].keyPath,d.keyPath)?"keyPath, expect: "+a.indexes[c].keyPath+", but: "+d.keyPath:a.indexes[c].unique!=d.unique?"unique, expect: "+a.indexes[c].unique+", but: "+d.unique:w(a.indexes[c].type)&&w(d.type)&&a.indexes[c].type!=d.type?"data type, expect: "+
a.indexes[c].type+", but: "+d.type:"";if(0<d.length)return'index "'+a.indexes[c].name+'" '+d}return""}
function zd(a,b){var c,d=b;if(C(a)){c=["version","stores"];for(var e in a)a.hasOwnProperty(e)&&-1==Ja(c,e)&&j(new O("Unknown field: "+e+" in "+JSON.stringify(a)));c=a.version;d=[];e=a.stores||[];x(e)||j(new O("stores must be array"));for(var f=0;f<e.length;f++){var g=od(e[f]);-1!=Pa(d,function(a){return a.name==g.name})&&j(new O('duplicate store name "'+g.name+'".'));d.push(g)}}else y(a)?c=0==a.length?k:parseFloat(a):B(a)&&(c=a);w(c)&&((!B(c)||0>c)&&j(new O("Invalid version: "+c+" ("+a+")")),isNaN(c)&&
(c=k));w(b)&&(!x(b)||0<b.length&&!(b[0]instanceof nd))&&j(new O("stores"));this.version=c;this.b=!w(this.version);this.stores=d||[]}zd.prototype.toJSON=function(){var a=this.stores.map(function(a){return a.toJSON()});return{version:this.version,stores:a}};zd.prototype.b=r;zd.prototype.a=ba(r);function Ad(a){return a.stores.map(function(a){return a.name})}zd.prototype.c=function(a){return this.stores[a]||p};function P(a,b){return Oa(a.stores,function(a){return a.name==b})}
function Bd(a,b){return Na(a.stores,function(a){return a.name==b})}function Cd(a,b){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var c=0;c<a.stores.length;c++){var d=P(b,a.stores[c].name),d=xd(a.stores[c],d);if(0<d.length)return'store: "'+a.stores[c].name+'" '+d}return""};K("ydn");function Dd(a){if(!y(a)||/^[\s\xa0]*$/.test(a))return{};try{return JSON.parse(a)}catch(b){j(b)}};function Ed(a,b){w(a)&&5242880<a&&I(this.j,"storage size request ignored.");this.m=p;this.$a=b||18E4}
Ed.prototype.ua=function(a,b){function c(a,c,d){Pb(e.j,(d?"changing":"upgrading")+" version to "+a.version+" from "+(b.a()?"auto":b.version));for(d=0;d<b.stores.length;d++)Fd(e,a,c,b.stores[d])}function d(a,b){w(b)?(I(e.j,b?b.message:"Error received."),e.m=p,f.e(b)):(e.m=a,e.m.onabort=function(a){J(e.j,e+": onabort - "+a.message)},e.m.onerror=function(a){J(e.j,e+": onerror - "+a.message)},e.m.onversionchange=function(a){J(e.j,e+": onversionchange to: "+a.version);e.m&&(e.m.onabort=p,e.m.onerror=p,
e.m.onversionchange=p,e.m.close(),e.m=p,fa(e.b)&&e.b())},M(f,a.version))}var e=this,f=new L,g=b.version;Pb(e.j,"Opening database: "+a+" ver: "+g);var h;h=w(g)?R.open(a,g):R.open(a);h.onsuccess=function(f){var g=f.target.result;Pb(e.j,"Database: "+g.name+", ver: "+g.version+" opened.");if(b.b)e.V(function(f){if(b.a())for(var h=0;h<f.stores.length;h++)if(!Bd(b,f.stores[h].name)){var m=od(f.stores[h].toJSON());b.stores.push(m)}f=Cd(b,f);if(0<f.length){Pb(e.j,"Schema change require for difference in "+
f);var q=B(g.version)?g.version+1:1;if("IDBOpenDBRequest"in v){g.close();var Q=R.open(a,q);Q.onupgradeneeded=function(a){a=a.target.result;Pb(e.j,"re-open for version "+a.version);c(a,Q.transaction,r)};Q.onsuccess=function(a){d(a.target.result)};Q.onerror=function(){Pb(e.j,e+": fail.");d(p)}}else{var ha=g.setVersion(q+"");ha.a=function(a){I(e.j,"migrating from "+g.version+" to "+q+" failed.");d(p,a)};ha.onsuccess=function(){ha.transaction.oncomplete=Ia;c(g,ha.transaction,n)};var Ia=function(){var b=
R.open(a);b.onsuccess=function(a){a=a.target.result;Pb(e.j,e+": OK.");d(a)};b.onerror=function(){Pb(e.j,e+": fail.");d(p)}};ha.transaction!=p&&(ha.transaction.oncomplete=Ia)}}else d(g)},k,g);else if(b.version>g.version){var h=g.setVersion(b.version);h.a=function(a){I(e.j,"migrating from "+g.version+" to "+b.version+" failed.");d(p,a)};h.onsuccess=function(){c(g,h.transaction,n)}}else b.version==g.version?Pb(e.j,"database version "+g.version+" ready to go"):I(e.j,"connected database version "+g.version+
" is higher than requested version."),e.V(function(a){a=Cd(b,a);0<a.length?(Pb(e.j,a),d(p,new Gd("different schema: "+a))):d(g)},k,g)};h.onupgradeneeded=function(a){a=a.target.result;Pb(e.j,"upgrade needed for version "+a.version);c(a,h.transaction,r)};h.onerror=function(c){Ob(e.j,"opening database "+a+":"+b.version+" failed.");d(p,c)};h.onblocked=function(c){Ob(e.j,"database "+a+" "+b.version+" block, close other connections.");d(p,c)};B(this.$a)&&Tc(function(){"done"!=h.readyState&&(Ob(e.j,e+": database state is still "+
h.readyState),d(p,Error("connection timeout after "+e.$a)))},this.$a);return f};var R=v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.moz_indexedDB||v.msIndexedDB;t=Ed.prototype;t.$a=18E4;t.type=ba("indexeddb");t.Fb=function(){return!!this.m};t.j=K("ydn.db.con.IndexedDb");t.m=p;
t.V=function(a,b,c){c=c||this.m;if(w(b)){if(b===p){if(0==c.objectStoreNames.length){a(new zd(c.version));return}j(new Hd)}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new zd(c.version));return}b=c.transaction(b,N)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),m=[],l=0,q=h.indexNames.length;l<q;l++){var u=h.index(h.indexNames[l]);m[l]=new hd(u.keyPath,k,u.unique,u.multiEntry,u.name)}f[d]=new nd(h.name,
h.keyPath,h.autoIncrement,k,m)}b=new zd(c.version,f);a(b)};
function Fd(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};d.keyPath!=p&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.name,a)}catch(c){"InvalidAccessError"==c.name&&j(new Id("creating store for "+d.name+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement)),"ConstraintError"==c.name&&j(new Gd("creating store for "+d.name)),j(c)}}J(a.j,"Creating Object Store for "+d.name+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.name)){c=c.objectStore(d.name);c.keyPath!=
d.keyPath?(b.deleteObjectStore(d.name),I(a.j,"store: "+d.name+" deleted due to keyPath change."),c=e()):c.autoIncrement!=d.autoIncrement&&(b.deleteObjectStore(d.name),I(a.j,"store: "+d.name+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0,h=0,m=0;m<d.indexes.length;m++){var l=d.indexes[m];f.contains(l.name)||(c.createIndex(l.name,l.keyPath,{unique:l.unique}),g++)}for(m=0;m<f.length;m++)qd(d,f[m])||(c.deleteIndex(f[m]),h++);J(a.j,"Updated store: "+c.name+", "+g+" index created, "+
h+" index deleted.")}else{c=e();for(m=0;m<d.indexes.length;m++)l=d.indexes[m],J(a.j,"Creating index: "+l.name+" multiEntry: "+l.multiEntry),l.unique||l.multiEntry?c.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multiEntry}):c.createIndex(l.name,l.keyPath);J(a.j,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
t.Ra=function(a,b,c,d){var e=this.m;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length&&a(p);b=e.transaction(b,c);b.oncomplete=function(a){d("complete",a)};b.onerror=function(a){d("error",a)};b.onabort=function(a){d("abort",a)};a(b)};t.cb=function(){this.m.close()};t.toString=function(){var a=this.m?this.m.name+":"+this.m.version:"";return this.type()+":"+a};function Jd(a){Error.captureStackTrace?Error.captureStackTrace(this,Jd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}F(Jd,Error);function Kd(a){Error.captureStackTrace?Error.captureStackTrace(this,Kd):this.stack=Error().stack||"";a&&(this.message=String(a))}F(Kd,Error);Kd.prototype.name="ydn.db.InternalError";
function Ld(a){Error.captureStackTrace?Error.captureStackTrace(this,Ld):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}F(Ld,Error);function Id(a){Error.captureStackTrace?Error.captureStackTrace(this,Id):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}F(Id,Error);function S(a){Error.captureStackTrace?Error.captureStackTrace(this,S):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}F(S,Error);
S.prototype.name="NotFoundError";function Md(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Md):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}F(Md,Error);function Nd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Nd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}F(Nd,Error);
function Od(a){Error.captureStackTrace?Error.captureStackTrace(this,Od):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}F(Od,Error);function Pd(a){this.a=w(a)?a:4194304}t=Pd.prototype;
t.ua=function(a,b){function c(a,b){w(b)?(d.P=p,e.e(b)):(d.P=a,M(e,parseFloat(a.version)))}var d=this,e=new L,f=p;try{var g=b.b?"":b.version+"",f=v.openDatabase(a,"",a,this.a)}catch(h){"SECURITY_ERR"==h.name?(I(this.s,"SECURITY_ERR for opening "+a),f=p,this.Gb=new Nd(h)):j(h)}if(f){f.version===g?J(this.s,"Existing database version "+f.version+" opened."):J(d.s,"Database version "+f.version+" opened, but require "+g+" version.");!b.b&&f.version<g&&J(d.s,"Upgrading to version: "+g);var m=f;J(d.s,a+": setting version from "+
m.version+" to "+b.version);var l=0;m.transaction(function(a){d.V(function(c){for(var e=0;e<b.stores.length;e++){var f=P(c,b.stores[e].name);Qd(d,a,b.stores[e],function(){l++},f)}},a,m)},function(a){j(a)},function(){l!=b.stores.length?I(d.s,a+": setting version voided."):(J(d.s,a+": ready."),c(m))})}else c(p,this.Gb);return e};t.type=ba("websql");t.Gb=p;t.P=p;t.s=K("ydn.db.con.WebSql");
t.V=function(a,b,c){function d(a,b){j(b)}function e(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"table"==e.type){for(var h=e.sql.substr(e.sql.indexOf("("),e.sql.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),E="",U,Q=[],ha=r,Ia=0;Ia<h.length;Ia++){var ga=h[Ia].match(/\w+|"[^"]+"/g),ta=Ba(ga[0],'"'),Ma=id(ga[1]);-1!=ga.indexOf("PRIMARY")&&-1!=ga.indexOf("KEY")?(E=ta,U=Ma,-1!=ga.indexOf("AUTOINCREMENT")&&(ha=n)):"_default_"!=ta&&(ga=new hd(ta,
Ma,"UNIQUE"==ga[2]),Q.push(ga))}e=new nd(e.name,E,ha,U,Q);g.push(e)}}d=new zd(f,g);a(d)}var f=(c=c||this.P)&&c.version?parseInt(c.version,10):k,f=isNaN(f)?k:f,g=[];if(b)b.executeSql("SELECT * FROM sqlite_master",[],e,d);else{var h=this;c.readTransaction(function(b){h.V(a,b,c)},function(a){Ob(h.s,"opening tx: "+a.message);j(a)},e)}};
function Qd(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){z++;z==m.length&&d(n)},function(b,d){j(new Md(d,"Error creating table: "+c.name+" "+a))})}var g="CREATE TABLE IF NOT EXISTS "+ud(c)+" (";rd(c);var h=c.type||"BLOB";x(h)&&(h="TEXT");c.keyPath!=p?(g+=rd(c)+" "+h+" UNIQUE PRIMARY KEY ",c.autoIncrement&&(g+=" AUTOINCREMENT ")):g=c.autoIncrement?g+("_ROWID_ "+h+" UNIQUE PRIMARY KEY AUTOINCREMENT "):g+("_ROWID_ "+h+" UNIQUE PRIMARY KEY ");for(var g=g+" ,_default_ BLOB",m=[],h=0;h<c.indexes.length;h++){var l=
c.indexes[h],q=l.unique?" UNIQUE ":" ",u="CREATE "+q+" INDEX IF NOT EXISTS "+G(l.name)+" ON "+ud(c)+" ("+G(l.keyPath)+")";m.push(u);l.keyPath!=c.keyPath&&(g+=", "+G(l.keyPath)+" "+(l.type||"BLOB")+q)}m.unshift(g+");");var z=0,g="Create";if(e){if(0==xd(c,e).length){J(a.s,c.name+" exists.");d(n);return}g="Modify"}J(a.s,g+" table: "+c.name+": "+m.join(";"));for(a=0;a<m.length;a++)f(m[a])}t.Fb=function(){return!!this.P};t.cb=aa();
t.Ra=function(a,b,c,d){function e(a){J(h.s,h+": Tx "+c+" request cause error.");d("error",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;this.P===p&&(a(p),d("error",this.Gb));c==N?this.P.readTransaction(g,e,f):c==Yc?this.P.changeVersion(this.P.version,this.P.version+1+"",g,e,f):this.P.transaction(g,e,f)};function Rd(a,b){if(R)return R.cmp(a,b);a=bd(a);b=bd(b);return a>b?1:a==b?0:-1};D("ydn.db.con.IStorage.prototype.transaction",aa().prototype.ea);function Sd(){this.clear()}t=Sd.prototype;t.setItem=function(a,b){w(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};t.getItem=function(a){return this.a[a]||p};t.removeItem=function(a){delete this.a[a];Ra(this.keys,a.toString());this.length=this.keys.length};t.length=0;t.key=function(a){a=this.keys[a];return w(a)?this.a[a]:p};t.clear=function(){this.a={};this.keys=[];this.length=0};function Td(a){this.r=a||new Sd}t=Td.prototype;t.bc=K("ydn.db.con.SimpleStorage");t.ua=function(a,b){this.ma=a;this.c=b;this.a={};for(var c=0;c<b.stores.length;c++){var d=b.c(c);this.a[d.name]=d.toJSON()}this.indexes={};d=Ud(this);c=Dd(this.r.getItem(d));Ad(b);if(c)for(var e in c)c.hasOwnProperty(e)&&!Bd(b,e)&&(d=c[e],b.a()?(Pb(this.bc,"Adding existing store: "+e),this.a[e]=d):(Pb(this.bc,"Deleting old store: "+e),Vd(this,e)));else this.r.setItem(d,JSON.stringify(this.a));return tc(1)};t.Fb=function(){return!!this.ma};
t.type=ba("memory");t.cb=aa();t.Ra=function(a,b,c,d){a(this);d("complete",{})};t.V=function(a){Tc(function(){for(var b=[],c=this.r.getItem(Ud(this)).stores,d=0;d<c.length;d++){var e=this.r.getItem(Ud(this,c[d]));b[d]=new nd(c[d],e.keyPath,e.autoIncrement)}b=new zd(this.ma,b);a(b)},0,this)};function Ud(a,b,c){a=["ydn.db",a.ma];w(b)&&(a.push(b),w(c)&&a.push(bd(c)));return a.join("^|")}function Wd(a,b,c){b=Ud(a,b instanceof nd?b.name:b,c);a=a.r.getItem(b);return a=a===p?k:Dd(a)}
function Xd(a,b,c,d){var e;e=P(a.c,c);d=w(d)?d:e.keyPath!=p?Wa(b,e.a):k;w(d)||(e.autoIncrement?(Ud(a,e.name),d=a.a[e.name],w(d.autoIncrementNo)||(d.autoIncrementNo=Yd(a,e.name,p).length),d.autoIncrementNo++,d=d.autoIncrementNo):j(new Jd));e=d;d=Ud(a,c,e);b=JSON.stringify(b);a.r.setItem(d,b);if(a=a.a[c].Keys){c=0;for(b=a.length;c<b&&e!=a[c];c++)if(e>a[c]){Ta(a,c,0,e);break}}return e}
function Vd(a,b,c){if(w(c))a.r.removeItem(Ud(a,b,c)),a=a.a[b].Keys,w(a)&&Ra(a,c);else if(w(b)){a.a[b]&&(a.a[b].Keys=p);c=Ud(a,b)+"^|";for(b=a.r.length-1;0<=b;b--){var d=a.r.key(b);0==d.lastIndexOf(c,0)&&a.r.removeItem(d)}}else{c=Ud(a)+"^|";for(b=a.r.length-1;0<=b;b--)d=a.r.key(b),0==d.lastIndexOf(c,0)&&a.r.removeItem(d)}}
t.index=function(a){var b=this.a[a],c=b.Keys;if(c==p){c=[];a=Ud(this,a);a+="^|";for(var d=0,e=this.r.length;d<e;d++){var f=this.r.key(d);if(0==f.lastIndexOf(a,0)){c.push(f);for(var f=0,g=b.indexes.length;f<g;f++);}}Ha.sort.call(c,Va);b.Keys=c;b.indexes={}}return c};
function Yd(a,b,c){function d(){return function(a){return a>=k}}function e(){return function(a){return a<k}}c!=p&&j(new Zd);a=a.index(b);if(!w(k)&&!w(k))return a;if(w(k)){if(w(k))return b=Pa(a,e()),c=Pa(a,d()),a.slice(b,c);b=Pa(a,d());return a.slice(b)}b=Pa(a,e());return a.slice(0,b)};function $d(){Td.call(this,window.localStorage)}F($d,Td);$d.prototype.type=ba("localstorage");function ae(){Td.call(this,window.sessionStorage)}F(ae,Td);ae.prototype.type=ba("sessionstorage");function be(a,b){yc.call(this,a,b)}F(be,yc);function ce(a,b,c,d){yc.call(this,a,b);this.version=c;this.message=d||"";this.name="StorageEvent"}F(ce,be);ce.prototype.version=NaN;ce.prototype.message="";function de(a,b,c,d,e){yc.call(this,a,b);this.d=c;this.key=d;this.value=e;this.name="RecordEvent"}F(de,be);function ee(a,b,c,d,e){yc.call(this,a,b);this.d=c;this.keys=d;this.ab=e;this.name="StoreEvent"}F(ee,be);ee.prototype.name="StoreEvent";function fe(a,b){zd.call(this,a,b)}F(fe,zd);fe.prototype.a=ba(n);function O(a){Error.captureStackTrace?Error.captureStackTrace(this,O):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.ArgumentException"}F(O,Error);function ge(a){Error.captureStackTrace?Error.captureStackTrace(this,ge):this.stack=Error().stack||"";a&&(this.message=String(a))}F(O,Error);ge.prototype.name="ydn.NotSupportedException";
function Zd(a){Error.captureStackTrace?Error.captureStackTrace(this,Zd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.NotImplementedException"}F(Zd,Error);function Hd(a){Error.captureStackTrace?Error.captureStackTrace(this,Hd):this.stack=Error().stack||"";a&&(this.message=String(a))}F(Hd,Error);Hd.prototype.name="ydn.InternalError";
function Gd(a){Error.captureStackTrace?Error.captureStackTrace(this,Gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.ConstrainError"}F(Gd,Error);function he(a){Error.captureStackTrace?Error.captureStackTrace(this,he):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.InvalidOperationException"}F(O,Error);
function ie(a){Error.captureStackTrace?Error.captureStackTrace(this,ie):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.InvalidOperationError"}F(ie,Error);function yd(a,b){var c;c=c||{};if(a==p||b==p)return r;if(x(a)&&x(b)){if(a.length!=b.length)return r;for(var d=0;d<a.length;d++)if(-1==Oa(b,function(b){return yd(b,a[d])}))return r;return n}if(x(a))return 1==a.length&&yd(a[0],b);if(x(b))return 1==b.length&&yd(b[0],a);if(C(a)&&C(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=yd(a[e],b[e]);if(!f)return r}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=yd(a[e],b[e]),!f))return r;return n}return a===b}
function je(a){for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
*/
function T(a,b,c){uc.call(this);c=c||{};var d=["autoSchema","size","mechanisms"],e;for(e in c)c.hasOwnProperty(e)&&-1==Ja(d,e)&&j(new O('Unknown attribute "'+e+'" in options.'));this.mc=c.mechanisms||ke;this.Va=c.size;this.Yb=w(c.Yb)?c.Yb:n;this.c=p;this.f=[];this.u=r;this.a=b instanceof zd?b:C(b)?c.autoSchema||!w(b.stores)?new fe(b):new zd(b):new fe;w(a)&&this.J(a)}F(T,Qc);T.prototype.n=K("ydn.db.con.Storage");
T.prototype.nc=function(a){if(w(a)){var b=function(b){a(b.toJSON())};if(this.c)this.c.V(b);else{var c=this;this.ea(function(a){c.c.V(b,a)},p,N)}}return this.a?this.a.toJSON():p};T.prototype.ib=function(a){var b=a instanceof nd?a:od(a);a=a.name;var c=P(this.a,a);if(0==xd(b,c).length)return tc(r);c=c?"update":"add";if(this.a instanceof fe)return this.a.stores.push(b),this.c?(this.c.cb(),this.c=p,le(this)):tc(r);j(new Gd("Cannot "+c+" store: "+a+". Not auto schema generation mode."))};
T.prototype.J=function(a){this.c&&j(Error("Already defined."));this.d=a;le(this)};D("ydn.db.con.Storage.prototype.setName",T.prototype.J);T.prototype.Q=s("d");var ke=["indexeddb","websql","localstorage","sessionstorage","memory"];function me(a,b){return"indexeddb"==b?new Ed(a.Va):"websql"==b?new Pd(a.Va):"localstorage"==b?new $d:"sessionstorage"==b?new ae:"memory"==b?new Td:p}
function le(a){for(var b=new L,c=p,d=a.mc,e=0;e<d.length;e++){var f=d[e].toLowerCase();if("indexeddb"==f&&R){c=me(a,f);break}else if("websql"==f&&fa(v.openDatabase)){c=me(a,f);break}else if("localstorage"==f&&window.localStorage){c=me(a,f);break}else if("sessionstorage"==f&&window.sessionStorage){c=me(a,f);break}else if("memory"==f){c=me(a,f);break}}c===p&&j(new Gd("No storage mechanism found."));c.ua(a.d,a.a).X(function(b){a.c=c;J(a.n,a+": ready.");a.pc=NaN;ne(a);Rc(a,new ce("connected",a,b));c.b=
function(){J(a.n,a+": disconnected.")}}).Oa(function(b){I(a.n,a+": opening fail: "+b.message);(new L).e(b);if(a.f){a.n.log(Gb,"Purging "+a.f.length+" transactions request.",k);for(var c=a.f.shift();c;)c.T("error",b),c=a.f.shift()}Rc(a,new ce("failed",a,b,"opening database fail: "+b.message))});return b}T.prototype.type=function(){return this.c?this.c.type():""};D("ydn.db.con.Storage.prototype.type",T.prototype.type);T.prototype.eb=function(){this.c&&(this.c.cb(),this.c=p)};
D("ydn.db.con.Storage.prototype.close",T.prototype.eb);T.prototype.pc=NaN;function ne(a){var b=a.f.shift();b&&T.prototype.ea.call(a,b.ob,b.sc,b.mode,b.T);pa()}T.prototype.u=r;
T.prototype.ea=function(a,b,c,d){var e=b;y(b)?e=[b]:b!=p?(!x(b)||!y(b[0]))&&j(new O("storeNames")):e=p;if(!this.c||!this.c.Fb()||this.u)this.f.push({ob:a,sc:e,mode:c,T:d}),pa(),100<this.f.length&&0==this.f.length%100&&I(this.n,"Transaction queue stack size is "+this.f.length+". It is too large, possibility due to incorrect usage.");else{var f=this,g=w(c)?c:N;g==Yc&&(this.u=n);this.c.Ra(function(b){a(b)},e,g,function(a,b){fa(d)&&d(a,b);g==Yc&&(f.u=r);ne(f)})}};
T.prototype.toString=function(){return"ydn.db.con.Storage:"+this.c};D("ydn.db.con.Storage",T);T.prototype.type=T.prototype.type;T.prototype.setName=T.prototype.J;T.prototype.getSchema=T.prototype.nc;T.prototype.transaction=T.prototype.ea;T.prototype.close=T.prototype.eb;
D("ydn.db.deleteDatabase",function(a){function b(){c.s.log(Gb,"all tables in "+a+" deleted.",k)}R&&"deleteDatabase"in R&&R.deleteDatabase(a);var c=new Pd,d=new fe,d=c.ua(a,d);d.X(function(){c.Ra(function(b){c.V(function(d){var e=d.stores.length;if(0<e)for(var m=0;m<e;m++){var l=d.c(m);Pb(c.s,"deleting table: "+l.name);b.executeSql("DROP TABLE "+ud(l))}else c.s.log(Gb,"no table to delete in "+a,k)},b)},[],Xc,b)});d.Oa(function(){I(c.s,"Connecting "+a+" failed.")});var d=new $d,e=new fe;d.ua(a,e);Vd(d);
d=new ae;e=new fe;d.ua(a,e);Vd(d)});be.prototype.name=be.prototype.name;de.prototype.store_name=de.prototype.d;de.prototype.message=de.prototype.name;function oe(a){this.d=a;this.a=p;this.c=0}t=oe.prototype;t.hb=K("ydn.db.tr.Mutex");t.sa="";t.T=p;t.l=s("a");t.toString=function(){var a;return a="Mutex:"+this.d+":"+this.c+(this.sa?"["+this.sa+"]":"")};/*
 _try.
*/
function pe(a,b,c){this.b=a;this.c=b;this.i=[];this.C=new oe(b);this.u=c}t=pe.prototype;t.Gc=K("ydn.db.tr.TxQueue");t.eb=function(){return this.b.eb()};t.ib=function(a){return this.b.ib(a)};t.ea=function(a,b,c,d){this.b.ea(a,b,c,d)};t.C=p;t.aa=function(){return this.C.c};t.t=s("b");t.l=function(){return this.C.a&&!this.C.b?this.C.l():p};D("ydn.db.tr.TxQueue.prototype.getTx",pe.prototype.l);pe.prototype.type=function(){return this.b.type()};
pe.prototype.o=function(a,b,c,d,e){var f=a.name||"",g=b;y(b)?g=[b]:(!x(b)||0<b.length&&!y(b[0]))&&j(new O("storeNames"));var h=w(c)?c:N,m=a;if(4<arguments.length){var l=Array.prototype.slice.call(arguments,4),m=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(l);return a.apply(this,b)};m.name=f}var q=this;this.C.a?this.i.push({ob:4<arguments.length?m:a,tc:b,mode:h,T:d}):this.b.ea(function(a){q.J=n;var b=q.C,c=f;b.a=a;b.b=r;b.sa=w(c)?c:"";b.c++;b.T=p;J(b.hb,b+": open");m(q)},g,h,function(a,
b){try{fa(d)&&d(a,b)}catch(c){j(c)}finally{var e=q.C;e.a?(J(e.hb,e+": close"),e.a=p,fa(e.T)&&e.T(a,b),e.T=p):I(e.hb,e+" has no TX to be unlocked for "+a);q.J=r;var e=q,f=e.i.shift();f&&e.o(f.ob,f.tc,f.mode,f.T);pa()}})};pe.prototype.toString=function(){var a="ydn.db.tr.TxQueue:"+this.b.Q(),b=this.C.sa;return a+":"+this.c+":"+this.aa()+(b?" ["+b+"]":"")};function qe(a,b,c){T.call(this,a,b,c);this.i=0}F(qe,T);qe.prototype.i=0;qe.prototype.aa=s("i");qe.prototype.qa=function(a){return new pe(this,this.i++,a)};qe.prototype.o=function(a,b,c,d,e){var f=this.qa(a.name||"");if(4<arguments.length){var g=Array.prototype.slice.call(arguments,4),h=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(g);return a.apply(this,b)};h.name=a.name;f.o(h,b,c,d)}else f.o(a,b,c,d)};D("ydn.db.tr.Storage",qe);qe.prototype.run=qe.prototype.o;pe.prototype.run=pe.prototype.o;function re(a,b){this.ma=a;this.a=b}re.prototype.q=K("ydn.db.req.RequestExecutor");re.prototype.g=p;function V(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}t=V.prototype;t.lower=k;t.upper=k;t.lowerOpen=r;t.upperOpen=r;t.toJSON=function(){return se(this)};function te(a,b,c,d){return new V(a,b,c,d)}function se(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function ue(a){return a==p?p:w(a.upper)&&w(a.lower)?ve.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):w(a.upper)?ve.upperBound(a.upper,a.upperOpen):w(a.lower)?ve.lowerBound(a.lower,a.lowerOpen):p}function we(a){if(a instanceof V)return"";if(a!=p){if(C(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ja(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
var ve=v.IDBKeyRange||v.webkitIDBKeyRange||V;function xe(a,b){re.call(this,a,b)}F(xe,re);t=xe.prototype;t.q=K("ydn.db.core.req.IndexedDb");t.l=s("g");t.Qa=function(a,b){function c(f){var g=d.g.objectStore(b[f]).count();g.onsuccess=function(d){e[f]=d.target.result;f++;f==b.length?M(a,e):c(f)};g.onerror=function(b){a.e(b)}}var d=this,e=[];0==b.length?M(a,[]):c(0)};t.zb=function(a,b,c,d){b=this.g.objectStore(b);c=w(d)?b.put(c,d):b.put(c);c.onsuccess=function(b){M(a,b.target.result)};c.onerror=function(b){a.e(b)}};
t.Ab=function(a,b,c,d){function e(b){var l;l=w(d)?h.put(c[b],d[b]):h.put(c[b]);l.onsuccess=function(d){g++;f[b]=d.target.result;g==c.length?M(a,f):(d=b+10,d<c.length&&e(d))};l.onerror=function(b){g++;a.e(b)}}var f=[],g=0,h=this.g.objectStore(b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)e(b);else M(a,[])};
t.kb=function(a,b,c){b=this.g.objectStore(b).openCursor(c);b.onsuccess=function(b){var e=b.target.result;e?(e=e["delete"](),e.onsuccess=function(){M(a,c)},e.onerror=function(){a.e(b)}):M(a,k)};b.onerror=function(b){a.e(b)}};t.ya=function(a,b){for(var c=x(b)&&0<b.length?b:y(b)?[b]:Ad(this.a),d=c.length,e=0,f=0;f<d;f++){var g=this.g.objectStore(c[f]).clear();g.onsuccess=function(){e++;e==d&&M(a,n)};g.onerror=function(b){e++;e==d&&a.e(b)}}};
function ye(a,b,c,d,e,f,g,h,m){var l=[];a=a.g.objectStore(c);f=Zc(f,m);d=d?a.index(d).openCursor(e,f):a.openCursor(e,f);var q=r;d.onsuccess=function(a){(a=a.target.result)?!q&&0<h?(q=n,a.advance(h)):(l.push(a.value),l.length<g?a.advance(1):M(b,l)):M(b,l)};d.onerror=function(a){b.e(a)}}t.Ea=function(a,b,c,d,e,f){ye(this,a,b,p,c,d,e,f)};t.Wa=function(a,b,c,d,e,f,g,h){ye(this,a,b,c,d,e,f,g,h)};
t.Sb=function(a,b,c,d,e,f){var g=[];b=this.g.objectStore(b).openCursor(c,Zc(d));var h=r;b.onsuccess=function(b){(b=b.target.result)?!h&&0<f?(h=n,b.advance(f)):(g.push(b.key),g.length<e?b.advance(1):M(a,g)):M(a,g)};b.onerror=function(b){a.e(b)}};t.Tb=function(a,b,c,d,e){var f=[];b=this.g.objectStore(b).openCursor(p,Zc(c));var g=r;b.onsuccess=function(b){(b=b.target.result)?!g&&0<e?(g=n,b.advance(e)):(f.push(b.primaryKey),f.length<d?b.advance(1):M(a,f)):M(a,f)};b.onerror=function(b){a.e(b)}};
t.Qb=function(a,b,c,d,e,f,g,h){var m=[];b=this.g.objectStore(b).index(c).openKeyCursor(d,Zc(e,h));var l=r;b.onsuccess=function(b){(b=b.target.result)?!l&&0<g?(l=n,b.advance(g)):(m.push(b.primaryKey),m.length<f&&b.advance(1)):M(a,m)};b.onerror=function(b){a.e(b)}};t.Ta=function(a,b,c){var d;try{d=this.g.objectStore(b)}catch(e){"NotFoundError"==e.name&&j(new S(b+" not in Tx scope: ?")),j(e)}b=d.get(c);b.onsuccess=function(b){M(a,b.target.result)};b.onerror=function(b){a.e(b)}};
t.ub=function(a,b,c){function d(b){if(c[b]==p)if(f++,e[b]=k,f==h)M(a,e);else{var l=b+10;l<h&&d(l)}var q;try{q=g.get(c[b])}catch(u){"DataError"==u.name&&j(new Jd(c[b])),j(u)}q.onsuccess=function(c){f++;e[b]=c.target.result;f==h?M(a,e):(c=b+10,c<h&&d(c))};q.onerror=function(b){f++;a.e(b)}}var e=[],f=0,g=this.g.objectStore(b),h=c.length;if(0<h)for(b=0;10>b&&b<h;b++)d(b);else M(a,[])};
t.vb=function(a,b){function c(g){var m=b[g],l=d.g.objectStore(m.a),q;try{q=l.get(m.id)}catch(u){"DataError"==u.name&&j(new Jd(m+" at "+g)),j(u)}q.onsuccess=function(d){f++;e[g]=d.target.result;f==b.length?M(a,e):(d=g+10,d<b.length&&c(d))};q.onerror=function(b){f++;a.e(b)}}var d=this,e=[],f=0;if(0<b.length)for(var g=0;10>g&&g<b.length;g++)c(g);else M(a,[])};
t.za=function(a,b,c,d){b=this.g.objectStore(b);w(d)?(d=b.index(d),c=c===p?d.count():d.count(c)):c=c===p?b.count():b.count(c);c.onsuccess=function(b){M(a,b.target.result)};c.onerror=function(b){a.e(b)}};function ze(a,b){re.call(this,a,b)}F(ze,re);t=ze.prototype;t.l=s("g");t.zb=function(a,b,c,d){b=Xd(this.l(),c,b,d);M(a,b)};t.Ab=function(a,b,c,d){for(var e=[],f=0;f<c.length;f++)e[f]=Xd(this.l(),c[f],b,w(d)?d[f]:k);M(a,e)};t.Ta=function(a,b,c){M(a,Wd(this.l(),b,c))};t.ub=function(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=Wd(this.l(),b,c[e]);d.push(f)}M(a,d)};t.vb=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=Wd(this.l(),b[d].a,b[d].id);c.push(e)}M(a,c)};t.Wa=aa();
t.kb=function(a,b,c){Vd(this.l(),b,c);M(a,n)};t.ya=function(a,b){for(var c=y(b)?[b]:b,d=0;d<c.length;d++)Vd(this.g,c[d]);M(a,n)};t.Qa=function(a,b){Tc(function(){for(var c=[],d=0;d<b.length;d++){var e=Yd(this.g,b[d]);c[d]=e.length}M(a,c)},0,this)};t.za=function(a,b){var c="_database_"+this.ma;w(b)&&(c+="-"+b);var d=0,e;for(e in this.g)this.g.hasOwnProperty(e)&&0==e.lastIndexOf(c,0)&&d++;M(a,d)};function Ae(a,b,c,d,e){var f,g,h,m;if(C(b))g=b.lower,f=b.upper,m=b.lowerOpen,h=b.upperOpen;else{if("<"==b||"<="==b)f=c,h="<"==b;else if(">"==b||">="==b)g=c,m=">"==b;else if("="==b||"=="==b)f=g=c;"<"==d||"<="==d?(f=e,h="<"==d):">"==d||">="==d?(g=e,m=">"==d):w(d)&&j(new O(d))}V.call(this,g,f,m,h);this.da=a}F(Ae,V);Ae.prototype.da="";
function Be(a,b){var c="",d=[];if(b){var e=G(a);Ce(b)?(c=e+" LIKE ?",d.push(b.lower+"%")):b.lower==b.upper?(c=e+" = ?",d.push(b.lower)):(w(b.lower)&&(c+=" "+e+(b.lowerOpen?" > ":" >= ")+"?",d.push(b.lower)),w(b.upper)&&(c+=(0<c.length?" AND ":" ")+e+(b.upperOpen?" < ":" <= ")+"?",d.push(b.upper)))}return{sql:c,yb:d}}function Ce(a){return a==p?r:w(a.lower)&&w(a.upper)&&!a.lowerOpen&&!a.upperOpen&&a.lower.length==a.upper.length+1&&"\uffff"==a.upper[a.lower.length-1]};function De(a,b){re.call(this,a,b)}F(De,re);t=De.prototype;t.q=K("ydn.db.core.req.WebSql");function Ee(a,b){var c=Dd(a._default_);if(b.keyPath!=p){var d=ld(a[b.keyPath],b.type);if(d!=p)for(var e=c,f=0;f<b.a.length;f++){var g=b.a[f];if(f==b.a.length-1){e[g]=d;break}w(e[g])||(e[g]={});e=e[g]}}for(d=0;d<b.indexes.length;d++)e=b.indexes[d],"_default_"!=e.name&&(c[e.name]=ld(a[e.name],e.type));return c}t.l=s("g");t.Sb=function(a,b,c,d,e,f){Fe(this,a,n,b,k,c,d,e,f)};
t.Qb=function(a,b,c,d,e,f,g){Fe(this,a,n,b,c,d,e,f,g)};
function Fe(a,b,c,d,e,f,g,h,m){var l=[],q=P(a.a,d);e=w(e)?e:td(q);d=G(e);var u=td(q),z="SELECT "+(c?G(u):"*")+" FROM "+ud(q),E=[];if(f!==p){e=Be(e,f);z+=" WHERE "+e.sql;for(f=0;f<e.yb.length;f++)E[f]=kd(e.yb[f],q.type)}z+=" ORDER BY "+d+" "+(g?"DESC":"ASC");B(h)&&(z+=" LIMIT "+h);B(m)&&(z+=" OFFSET "+m);a.g.executeSql(z,E,function(a,d){for(var e=0,f=d.rows.length;e<f;e++){var g=d.rows.item(e);c?l[e]=ld(g[u],q.type):g!=p&&(l[e]=Ee(g,q))}M(b,l)},function(c,d){I(a.q,"get error: "+d.message);b.e(d);return n})}
t.Tb=function(a,b,c,d,e){Fe(this,a,n,b,k,p,c,d,e)};t.zb=function(a,b,c,d){var e=P(this.a,b);e||j(new S(b));var f=this,g=vd(e,c,d);b="INSERT OR REPLACE INTO "+ud(e)+" ("+g.Ib.join(", ")+") VALUES ("+g.Xb.join(", ")+");";this.g.executeSql(b,g.ab,function(b,c){M(a,w(g.key)?g.key:c.insertId)},function(b,c){I(f.q,"put error: "+c.message);a.e(c);return n})};
t.Ab=function(a,b,c,d){function e(b,l){var q;q=w(d)?vd(f,c[b],d[b]):vd(f,c[b]);var u="INSERT OR REPLACE INTO "+ud(f)+" ("+q.Ib.join(", ")+") VALUES ("+q.Xb.join(", ")+");";l.executeSql(u,q.ab,function(d,f){h++;g[b]=w(q.key)?q.key:f.insertId;if(h==c.length)M(a,g);else{var l=b+2;l<c.length&&e(l,d)}},function(b,c){a.e(c);return n})}var f=P(this.a,b);f||j(new S(b));var g=[],h=0;if(0<c.length)for(b=0;2>b&&b<c.length;b++)e(b,this.l());else M(a,[])};
t.Ta=function(a,b,c){var d=P(this.a,b),e=this;b=sd(d);c=[kd(c,d.type)];b="SELECT * FROM "+ud(d)+" WHERE "+b+" = ?";this.g.executeSql(b,c,function(b,c){if(0<c.rows.length){var e=c.rows.item(0);e!=p?(e=Ee(e,d),M(a,e)):M(a,k)}else M(a,k)},function(b,c){I(e.q,"get error: "+c.message);a.e(c);return n})};
t.ub=function(a,b,c){function d(b,l){var q=c[b],u=sd(h),q=[kd(q,h.type)],u="SELECT * FROM "+ud(h)+" WHERE "+u+" = ?";l.executeSql(u,q,function(e,l){g++;if(0<l.rows.length){var q=l.rows.item(0);q!=p&&(f[b]=Ee(q,h))}else f[b]=k;g==c.length?M(a,f):(q=b+10,q<c.length&&d(q,e))},function(b,c){I(e.q,"get error: "+c.message);a.e(c);return n})}var e=this,f=[],g=0,h=P(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,this.l());else M(a,[])};t.Ea=function(a,b,c,d,e,f){Fe(this,a,r,b,k,c,d,e,f)};t.Wa=aa();
t.vb=function(a,b){function c(g,m){var l=b[g],q=P(d.a,l.a),l=x(l.id)?l.id.join("^|"):l.id;sd(q);var l=[l],u="SELECT * FROM "+ud(q)+" WHERE "+rd(q)+" = ?";m.executeSql(u,l,function(d,m){f++;if(0<m.rows.length){var l=m.rows.item(0);l!=p&&(e[g]=Ee(l,q))}else e[g]=k;f==b.length?M(a,e):(l=g+10,l<b.length&&c(l,d))},function(b,c){I(d.q,"get error: "+c.message);a.e(c);return n})}var d=this,e=[],f=0;if(0<b.length)for(var g=0;10>g&&g<b.length;g++)c(g,this.l());else M(a,[])};
t.ya=function(a,b){function c(b,g){var h=P(d.a,e[b]);h||j(new S(e[b]));h="DELETE FROM  "+ud(h);g.executeSql(h,[],function(d){b==e.length-1?M(a,n):c(b+1,d)},function(b,c){I(d.q,"Sqlite error: "+c.message);a.e(c);return n})}var d=this,e=x(b)&&0<b.length?b:y(b)?[b]:Ad(this.a);0<e.length?c(0,this.g):M(a,[])};
t.kb=function(a,b,c){var d=P(this.a,b);d||j(new S(b));var e=this;b="DELETE FROM "+ud(d)+" WHERE "+rd(d)+" = ?";this.g.executeSql(b,[c],function(b,d){M(a,1==d.rowsAffected?c:k)},function(b,c){I(e.q,"put error: "+c.message);a.e(c);return n})};
t.Qa=function(a,b){function c(f){var g="SELECT COUNT(*) FROM "+G(b[f]);d.g.executeSql(g,[],function(d,g){var l=g.rows.item(0);e[f]=parseInt(l["COUNT(*)"],10);f++;f==b.length?M(a,e):c(f)},function(b,c){I(d.q,"count error: "+c.message);a.e(c);return n})}var d=this,e=[];0==b.length?M(a,0):c(0);return a};
t.za=function(a,b){var c=this,d="SELECT COUNT(*) FROM "+G(b);this.g.executeSql(d,[],function(b,c){var d=c.rows.item(0);M(a,d["COUNT(*)"])},function(b,d){I(c.q,"count error: "+d.message);a.e(d);return n});return a};t.toString=function(){return"WebSqlEx:"+(this.ma||"")};function W(a,b,c,d){pe.call(this,a,b,c);this.a=d}F(W,pe);t=W.prototype;t.t=function(){return W.ba.t.call(this)};t.Q=function(){return this.d=this.d||this.t().Q()};t.p=p;t.na=function(){if(this.p)return this.p;var a=this.type();"indexeddb"==a?this.p=new xe(this.Q(),this.a):"websql"==a?this.p=new De(this.d,this.a):"memory"==a||"localstorage"==a||"sessionstorage"==a?this.p=new ze(this.d,this.a):j(new Kd("No executor for "+a));return this.p};
t.h=function(a,b,c,d){var e=this,f=this.C;if(f.a&&!f.b)e.na().g=f.l(),a(e.na());else{var g=function(){e.pa=n;f.a||j(new Kd("Tx not active for scope: "+d));f.b&&j(new Kd("Tx not available for scope: "+d));e.na().g=f.l();a(e.na());J(f.hb,f+": locked");f.b=n};g.name=d;e.o(g,b,c,aa())}};
t.fb=function(a,b,c){var d=new L,e,f,g;if(w(a))if(x(a)){(w(c)||w(b))&&j(new O("too many arguments."));e=a;for(a=0;a<e.length;a++)Bd(this.a,e[a])||j(new S(e[a]));this.h(function(a){a.Qa(d,e)},e,N,"countStores")}else y(a)?(Bd(this.a,a)||j(new S(a)),e=[a],y(b)?(f=b,g=ue(c)):C(b)||!w(b)?(w(c)&&j(new O),g=ue(b)):j(new O("key range")),this.h(function(a){a.za(d,e[0],g,f)},e,N,"countKeyRange")):j(new O);else{(w(c)||w(b))&&j(new O("too many arguments."));e=Ad(this.a);var h=new L;this.h(function(a){a.Qa(d,
e)},e,N,"countStores");d.S(function(a){a=a.reduce(function(a,b){return b+a},0);M(h,a)},function(a){h.e(a)});return h}return d};t.ja=function(a,b){var c=new L;if(a instanceof $c){var d=a.a;if(!Bd(this.a,d)){if(this.a.a())return tc(k);j(new O("Store: "+d+" not found."))}var e=a.id;this.h(function(a){a.Ta(c,d,e)},[d],N,"getById")}else if(y(a)&&w(b)){if(!P(this.a,a)){if(this.a.a())return tc(k);j(new O("Store: "+a+" not found."))}this.h(function(d){d.Ta(c,a,b)},[a],N,"getById")}else j(new O);return c};
t.keys=function(a,b,c,d,e,f,g){var h,m,l,q,u,z;(z=P(this.a,a))||j(new S(a));var E=new L;!w(b)||A(b)?(q=!!b,B(c)?m=c:(w(c)&&j(new O("arg3")),m=1E6),B(d)?l=d:(w(d)&&j(new O("arg4")),l=0),this.h(function(b){b.Tb(E,a,q,m,l)},[a],N,"keysByStore")):C(b)||b===p?(C(b)&&(h=ue(b),h===p&&j(new O("key range"))),A(c)||!w(c)?(q=!!c,B(d)?m=d:(w(d)&&j(new O("arg4 must be number|undefined.")),m=1E6),B(e)?l=e:(w(e)&&j(new O("arg5 must be number|undefined.")),l=0),(w(f)||w(g))&&j(new O("too many arguments")),this.h(function(b){b.Sb(E,
a,h,q,m,l)},[a],N,"keysByKeyRange")):j(new O("arg3 must be boolean|string|undefined."))):y(b)?(qd(z,b)||j(new S(b+" in "+a)),!w(c)||c===p||C(c)?h=ue(c):j(new O("arg3 must be IDBKeyRange|null|undefined.")),w(d)&&!A(d)&&j(new O("arg4 must be boolean|undefined.")),q=!!d,B(e)?m=e:(w(e)&&j(new O("arg5 must be number|undefined.")),m=1E6),B(f)?l=f:(w(f)&&j(new O("arg6 must be number|undefined.")),l=0),w(g)&&!A(g)&&j(new O("arg7 must be boolean|undefined.")),u=!!g,this.h(function(c){c.Qb(E,a,b,h,q,m,l,u)},
[a],N,"keysByIndexKeyRange")):j(new O);return E};
t.va=function(a,b,c,d,e,f,g){var h=new L,m,l,q,u;if(y(a)){if(!P(this.a,a)){if(this.a.a())return tc(k);j(new O("Store: "+a+" not found."))}if(x(b))this.h(function(c){c.ub(h,a,b)},[a],N,"listByIds");else if(!w(b)||A(b))m=!!b,w(c)?B(c)?l=c:j(new O("arg3 must be number|undefined.")):l=1E6,w(d)?B(d)?q=d:j(new O("arg4 must be number|undefined.")):q=0,w(e)&&j(new O("too many input arguments")),this.h(function(b){b.Ea(h,a,p,m,l,q)},[a],N,"listByKeyRange");else if(C(b)||b===p||!w(b)){var z=ue(b);w(c)&&!A(c)&&
j(new O("arg3 must be boolean|undefined."));m=!!c;w(d)?B(d)?l=d:j(new O("arg4 must be number|undefined.")):l=1E6;w(e)?B(e)?q=e:j(new O("arg5 must be number|undefined.")):q=0;var E=z;this.h(function(b){b.Ea(h,a,E,m,l,q)},[a],N,"listByKeyRange")}else y(b)?(z=ue(c),w(d)&&!A(d)&&j(new O("arg4 must be boolean|undefined.")),m=!!d,w(e)?B(e)?l=e:j(new O("arg5 must be number|undefined.")):l=1E6,w(f)?B(f)?q=f:j(new O("arg6 must be number|undefined.")):q=0,u=!!g,w(g)&&!A(g)&&j(new O("arg7 must be boolean|undefined.")),
this.h(function(c){c.Wa(h,a,b,z,m,l,q,u)},[a],N,"listByKeyRange")):j(new O("arg2"))}else if(x(a))if(a[0]instanceof $c){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!Bd(this.a,e)){if(this.a.a())return c=[],c[a.length-1]=k,tc(c);j(new O("Store: "+e+" not found."))}0<=Ja(c,e)||c.push(e)}this.h(function(b){b.vb(h,a)},c,N,"listByKeys")}else j(new O("must be array of ydn.db.Key"));else j(new O);return h};
t.La=function(a,b,c){var d=y(a)?a:C(a)?a.name:k;y(d)||j(new O("store name"));var e=P(this.a,d);e?this.a.a()&&C(a)&&(a=od(a),(a=xd(e,a))&&j(new ge("schema change: "+a))):(this.a.a()||j(new S(d)),e=od(C(a)?a:{name:d}),J(this.Gc,"Adding object store: "+d),this.ib(e));var f=new L,g=this;e||j(new S(d));y(e.keyPath)&&w(c)&&j(new O("key cannot provide while in-line key is in used."));e.autoIncrement&&w(c)&&j(new O("key cannot provide while autoIncrement is true."));!y(e.keyPath)&&(!e.autoIncrement&&!w(c))&&
j(new O("out-of-line key must be provided."));x(b)?(this.h(function(a){a.Ab(f,d,b,c)},[d],Xc,"putObjects"),e.b&&f.X(function(a){Rc(g.t(),new ee("updated",g.t(),d,a,b))})):C(b)?(this.h(function(a){a.zb(f,d,b,c)},[d],Xc,"putObject"),e.b&&f.X(function(a){Rc(g.t(),new de("updated",g.t(),d,a,b))})):j(new O);return f};
t.clear=function(a,b){var c=new L,d=this;if(y(a)){var e=P(this.a,a);e||j(new S(a));y(b)||B(b)||x(b)?(this.h(function(d){d.kb(c,a,b)},[a],Xc,"clearById"),e.b&&c.X(function(b){Rc(d.t(),new de("deleted",d.t(),a,b,k))})):(w(b)&&j(new O),this.h(function(b){b.ya(c,a)},[a],Xc,"clearByStore"),e.b&&c.X(function(){Rc(d.t(),new ee("deleted",d.t(),a,p,k))}))}else if(x(a)&&y(a[0])){var f=a;this.h(function(a){a.ya(c,f)},f,Xc,"clearByStore")}else w(a)&&j(new O),f=Ad(this.a),this.h(function(a){a.ya(c,f)},f,Xc,"clearByStore");
return c};t.toString=function(){var a="TxStorage:"+this.t().Q(),b=this.u,c=this.C.sa;return a+":"+this.c+(b?"["+b+"]":"")+":"+this.aa()+(c?"["+c+"]":"")};function X(a,b,c){qe.call(this,a,b,c);this.b=this.qa("base")}F(X,qe);t=X.prototype;t.qa=function(a){return new W(this,this.i++,a,this.a)};t.aa=function(){return this.b.aa()};t.fb=function(a,b,c){return this.b.fb(a,b,c)};t.ja=function(a,b){return this.b.ja(a,b)};t.keys=function(a,b,c,d,e,f,g){return this.b.keys(a,b,c,d,e,f,g)};t.va=function(a,b,c,d,e,f,g){return this.b.va(a,b,c,d,e,f,g)};t.La=function(a,b,c){return this.b.La(a,b,c)};t.clear=function(a,b){return this.b.clear(a,b)};
t.toString=function(){var a="Storage:"+this.Q();return this.b?a+":"+this.b.aa():a};D("ydn.db.core.Storage",X);X.prototype.get=X.prototype.ja;X.prototype.list=X.prototype.va;X.prototype.put=X.prototype.La;X.prototype.clear=X.prototype.clear;X.prototype.count=X.prototype.fb;W.prototype.get=W.prototype.ja;W.prototype.list=W.prototype.va;W.prototype.put=W.prototype.La;W.prototype.clear=W.prototype.clear;W.prototype.count=W.prototype.fb;D("ydn.db.cmp",Rd);D("ydn.db.Key",$c);$c.prototype.id=$c.prototype.jc;$c.prototype.parent=$c.prototype.Bc;$c.prototype.storeName=$c.prototype.Cc;
D("ydn.db.KeyRange",V);V.upperBound=function(a,b){return new V(k,a,k,b)};V.lowerBound=function(a,b){return new V(a,k,b,k)};V.bound=te;V.only=function(a){return new V(a,a,r,r)};V.starts=function(a){var b;x(a)?(b=Dd(JSON.stringify(a)),b.push("\uffff")):y(a)?b=a+"\uffff":j(new O);return te(a,b,r,n)};de.prototype.store_name=de.prototype.d;de.prototype.key=de.prototype.key;de.prototype.value=de.prototype.value;ee.prototype.store_name=ee.prototype.d;ee.prototype.keys=ee.prototype.keys;
ee.prototype.values=ee.prototype.ab;function Y(a,b,c,d,e,f){y(a)||j(new O("store"));var g;x(b)?g=b.join(", "):y(b)?g=b:(w(b)&&j(new O("index")),g=k);6<arguments.length&&j(new O("too many input arguments."));this.L=a;this.index=g;this.G=w(f)?f:!!y(this.index);A(this.G)||j(new O("key_only"));w(d)&&!A(d)&&j(new O("reverse"));w(e)&&!A(e)&&j(new O("unique"));g="next";d&&e?g="prevunique":d?g="prev":e&&(g="nextunique");this.direction=g;(g=we(c))&&j(new O(g));this.c=ue(c);this.Sa=[];this.Mb=[];this.Nb=[];this.nb=[];this.mb=[];this.d=0;this.A=
this.b=this.a=k;this.Ba=r}function Ge(a,b,c,d,e){C(b)&&!x(b)&&(e=d,w(c)?(Ga(c,"reverse must be boolean"),d=c):d=k,c=b,b=k);Y.call(this,a,b,c,d,e,n)}F(Ge,Y);function He(a,b,c,d,e){C(b)&&!x(b)&&(e=d,w(c)?(Ga(c,"reverse must be boolean"),d=c):d=k,c=b,b=k);Y.call(this,a,b,c,d,e,r)}F(He,Y);function Ie(a){return w(a.A)?a.A===r?a.Ba?"working":"resting":"completed":"initial"}t=Y.prototype;t.$b=K("ydn.db.Iterator");t.wc=s("L");t.vc=s("index");t.A=k;t.Ba=r;t.N=s("a");t.kc=function(){return ue(this.c)};
t.G=n;t.yc=s("G");t.toJSON=function(){return{store:this.L,index:this.index,key_range:this.c?se(this.c):p,direction:this.direction}};t.toString=function(){var a=w(this.index)?":"+this.index:"";if(this.a!=p){var b="]",c="[",d=Ie(this);"working"==d?(c="{",b="}"):"resting"==d&&(c="(",b=")");a+=" "+c+this.a+", "+this.b+b}return"Iterator:"+this.L+a};t.key=s("a");t.xc=s("b");t.rc=function(a,b){this.a=a;this.b=b};t.uc=s("d");t.ic=s("A");t.stores=function(){return[this.L].concat(this.Ya)};t.Ya=[];t.oc=[];
t.gc=[];t.Zb=function(){return"prev"===this.direction||"prevunique"===this.direction};t.zc=function(){return"nextunique"===this.direction||"prevunique"===this.direction};t.Sa=[];t.Mb=[];t.Nb=[];t.nb=[];t.mb=[];function Je(a){a.a=x(a.a)?Sa(a.a):a.a;a.b=x(a.b)?Sa(a.b):a.b;a.Ba=r;a.A=r;J(a.$b,a+": exited")}
function Ke(a,b){var c;if(0<a.Sa.length){var d,e;a.A===r?(d=a.a,e=a.b):a.d=0;a.Ba=n;var f=[],g=b.Ua(a.L,a.index,a.c,a.direction,a.G,d,e);g.w=function(b,c){w(b)?(a.A=r,a.a=b,a.b=c,m()&&l()):(a.A=n,a.Ba=r)};c=function(b,c,d){m();w(c)&&(a.nb[b]=c,a.mb[b]=d);m()&&l()};for(var h=0;h<a.Sa.length;h++)d=b.Ua(a.Nb[h]||a.L,a.Sa[h],a.Mb[h],a.direction,n,a.nb[h],a.mb[h]),f.push(d),d.w=oa(c,h);var m=function(){return!f.some(function(a){return a.sb})},l=function(){for(var b=r,c=n,d=[],e=a.a,h=0;h<f.length;h++){var l=
f[h];if(l.oa()){var m=Rd(a.a,l.N());d[h]=m;1===m?c=r:-1===m&&(c=r,b=n,1===Rd(l.N(),e)&&(e=l.N()))}else c=r}if(c){g.v(g.N(),g.gb(),g.pb());for(h=0;h<f.length;h++)f[h].forward(n)}else if(b){e!=a.a&&g.seek(e,k,n);for(h=0;h<f.length;h++)0==d[h]?f[h].seek(e):-1==d[h]?f[h].seek(e):f[h].oa()?e!=f[h].N()&&f[h].seek(e):f[h].seek(e)}else{a.a!=e&&g.seek(e);for(h=0;h<f.length;h++)(!f[h].oa()||0!==Rd(f[h].N(),e))&&f[h].seek(e)}};c=g}else{(d=a.A===r)?(c=a.a,h=a.b):a.d=0;a.A=k;var q=b.Ua(a.L,a.index,a.c,a.direction,
a.G,c,h);J(a.$b,a+" created "+q);q.w=function(b,c,d){w(b)?(a.a=b,a.b=c,a.d++,q.v(b,c,d)):(a.A=n,q.v(k,k,k))};q.D(c,h,d);c=q}return c}t.Ac=function(){"working"==Ie(this)&&j(new ie("working"));this.d=0;this.A=this.b=this.a=k};function Le(a,b,c,d,e){"transaction"in a?(this.o=a,this.d=this.i=p):"objectStore"in a?(this.o=p,this.i=a.db,this.d=a,this.d.db.objectStoreNames.contains(b)||j(new O('store "'+b+'" not in transaction.'))):j(new O);this.u=b;this.c=c;this.n=e;this.J=d;this.b=[];this.f=r}Le.prototype.a=K("ydn.db.con.IdbCursorStream");Le.prototype.f=r;Le.prototype.b=[];
function Me(a,b){b.onsuccess=function(b){if(b=b.target.result)if(fa(a.n)?a.J?a.n(b.primaryKey,b.key):a.n(b.primaryKey,b.value):I(a.a,"sink gone, dropping value for: "+b.primaryKey),0<a.b.length)b["continue"](a.b.shift())};b.onerror=function(){I(a.a,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""))}}
Le.prototype.seek=function(a){this.b.push(a);if(!this.f){var b=this,c=function(a,c){b.d=p;"complete"!==a&&I(b.a,c.name+":"+c.message);J(b.a,b+" transaction "+a)},d=function(a){var c=b.b.shift();J(b.a,b+" transaction started for "+c);a=a.objectStore(b.u);var d=a.indexNames;w(b.c)&&d.contains(b.c)?(a=a.index(b.c),b.J?Me(b,a.openKeyCursor(c)):Me(b,a.openCursor(c))):!w(b.c)||b.c==a.keyPath?Me(b,a.openCursor(c)):j(new Ld)};this.d?(J(b.a,b+" using existing tx."),d(this.d)):this.i?(J(b.a,b+" creating tx from IDBDatabase."),
this.g=this.i.transaction([this.u],N),this.g.oncomplete=function(a){c("complete",a)},this.g.onerror=function(a){c("error",a)},this.g.onabort=function(a){c("abort",a)}):this.o?(J(b.a,b+" creating tx from ydn.db.con.IStorage."),this.f=n,this.o.ea(function(a){b.f=r;d(a)},[b.u],N,c)):j(new Hd("no way to create a transaction provided."))}};function Ne(a,b,c,d){this.b=b;this.c=y(c)?c:k;"transaction"in a?(this.Ka=a,this.a=p):"db"in a?(this.Ka=p,Oe(this,a)):j(new O);this.a=p;this.bb=y(c);this.d=d||k;this.Ia=[];this.Db=[];this.tb=r}t=Ne.prototype;t.Ka=p;t.bb=n;t.Eb=p;t.Db=[];t.Ia=[];function Oe(a,b){"db"in b?a.a=new Le(b,a.b,a.c,a.bb,na(a.lb,a)):j(new O)}function Pe(a){var b=0<a.Ia.length;if(b&&!a.tb&&fa(a.Eb)){var c=function(){Pe(a)},d=a.Db.shift(),e=a.Ia.shift(),b=0<a.Ia.length,c=a.Eb(d,e,b?c:p);b&&!c&&Pe(a)}}t.tb=r;
t.lb=function(a,b){this.Db.push(a);this.Ia.push(b);Pe(this)};t.push=function(a,b){this.tb&&j(new ie("collecting"));if(2<=arguments.length)this.lb(a,b);else{if(!this.a){this.Ka||j(new ie("No database set."));var c=this.Ka.type();c?"indexeddb"===c?this.a=new Le(this.Ka,this.b,this.c,this.bb,na(this.lb,this)):j(new Zd(c)):j(new ie("Database not connected."))}this.a.seek(a)}};t.toString=function(){return"Streamer:"+this.b+(this.c||"")};function Qe(a,b,c,d,e){this.R=a;this.B=b;this.z=c;this.wa="prev"==d||"prevunique"==d;this.W=d;this.Ca=e}t=Qe.prototype;t.B="";t.R="";t.W="";t.z=p;t.wa=r;t.Ca=n;t.O=function(a){j(a)};t.w=function(a,b,c){this.v(a,b,c)};t.v=aa();t.sb=r;t.toString=function(){var a="";this.oa()&&(a="{"+this.N()+":"+this.gb()+"}");return"Cursor:"+this.R+(w(this.B)?":"+this.B:"")+a};function Re(a,b){a!=p&&!("push"in a)&&j(new O);this.a=a||p;this.b=b;this.c=0}Re.prototype.a=p;Re.prototype.Pa=ba(r);function Se(a,b,c){for(var d=c[0],e=1;e<c.length;e++)if(c[e]!=p){if(d!=p&&0!=Rd(c[e],d)){d=p;break}}else d=p;return d!=p&&(a.c++,a.a&&a.a.push(d),w(a.b)&&a.c>=a.b)?[]:b}Re.prototype.Za=function(){return[]};function Te(a,b,c,d,e,f){Qe.call(this,b,c,d,e,f);this.ga=a;this.index=p;c!=p&&(a.indexNames.contains(c)?this.index=a.index(c):a.keyPath!=c&&j(new Kd('index "'+c+'" not found in '+a.name)));this.ca=this.U=this.k=p;this.fa=this.ta=r}F(Te,Qe);t=Te.prototype;t.xa=K("ydn.db.index.req.IDBCursor");t.ga=p;t.index=p;t.k=p;
t.qc=function(a){var b="IDBCursor: "+this.R+":"+this.B;this.fa=r;if(this.k=a=a.target.result){if(this.ca!=p){b=R.cmp(a.key,this.ca);if(1===b){this.ca=this.U=p;this.w(a.primaryKey,a.key,a.value);return}if(0===b)this.ca=p;else{a["continue"]();return}}if(this.U!=p)if(b=R.cmp(this.U,a.primaryKey),0===b)this.U=p,this.ta?(this.ta=r,a["continue"]()):this.w(a.primaryKey,a.key,a.value);else if(1===b)a["continue"]();else this.U=p,this.w(a.primaryKey,a.key,a.value);else this.w(a.primaryKey,a.key,a.value)}else this.U=
this.ca=p,this.ta=r,J(this.xa,b+" completed."),this.w(k,k,k)};t.U=p;t.ca=p;t.ta=r;t.fa=r;
t.D=function(a,b,c){var d="IDBCursor: "+this.R+":"+this.B;this.U=a;this.ca=b;this.ta=!!c;a=this.z;if(b!=p)if(this.z!=p){if(1==R.cmp(b,this.z.lower)){J(this.xa,d+" not opened, index key out of range "+b+">="+this.z.lower);this.v(k,k,k);return}a=ve.bound(b,this.z.upper,r,this.z.upperOpen)}else a=ve.lowerBound(b);b=this.Ca?this.index?this.W!=p?this.index.openKeyCursor(a,this.W):a!=p?this.index.openKeyCursor(a):this.index.openKeyCursor():this.W!=p?this.ga.openCursor(a,this.W):a!=p?this.ga.openCursor(a):
this.ga.openCursor():this.index?this.W!=p?this.index.openCursor(a,this.W):a!=p?this.index.openCursor(a):this.index.openCursor():this.W!=p?this.ga.openCursor(a,this.W):a!=p?this.ga.openCursor(a):this.ga.openCursor();this.fa=n;J(this.xa,d+" opened, request "+b.readyState);b.onsuccess=na(this.qc,this);b.onerror=na(this.O,this)};t.advance=function(a){this.k?this.k.advance(a):j(new ie("IDBCursor:"+this.R+":"+this.B+" cursor gone."))};
t.forward=function(a){var b="IDBCursor:"+this.R+":"+this.B;if(a===r)J(this.xa,b+" restarting."),this.D();else if(this.k)if(a===n)this.k["continue"]();else if(a!=p)this.k["continue"](a);else this.w(k,k,k),J(this.xa,b+" resting.");else j(new ie(b+" cursor gone."))};t.oa=function(){return!!this.k};t.gb=function(){return this.k.key};t.N=function(){return this.k.primaryKey};t.pb=function(){return this.k.value};
t.seek=function(a,b,c){var d="IDBCursor:"+this.R+":"+this.B;this.fa&&j(new Kd(d+" has pending request."));this.ca=b;this.U=a;this.ta=!!c;if(this.k){var e=R.cmp(a,this.k.primaryKey),f=0==e||1==e&&!this.wa||-1==e&&this.wa;if(b!=p){c=R.cmp(this.k.key,b);var g=1==c&&!this.wa||-1==c&&this.wa;if(0===c)0===e&&j(new Hd(d+" cursor cannot seek to current position")),f?(this.fa=n,this.k["continue"]()):this.D(a,b);else if(g)this.k["continue"](b);else J(this.xa,d+" restarting for "+a),this.D(a,b)}else 0===e?(c||
j(new Kd(d+"cursor cannot seek to current position")),this.fa=n,this.k["continue"]()):f?(this.fa=n,this.k["continue"]()):this.D(a,b,c)}else j(new Kd(d+" cursor gone."))};t.Fc=function(a){if(this.k){var b=new L;a=this.k.update(a);a.onsuccess=function(a){M(b,a)};a.onerror=function(a){b.e(a)};return b}j(new Id("cursor gone"))};t.clear=function(){if(this.k){var a=new L,b=this.k["delete"]();b.onsuccess=function(b){M(a,b)};b.onerror=function(b){a.e(b)};return a}j(new Id("cursor gone"))};function Ue(a,b){re.call(this,a,b)}F(Ue,xe);t=Ue.prototype;t.q=K("ydn.db.index.req.IndexedDb");t.Ob=function(a,b){var c=Ke(b,this);c.O=function(b){a.e(b)};c.v=function(c,e,f){Je(b);M(a,b.G?e:f)}};t.l=s("g");t.Rb=function(a,b,c,d){var e=[],f=Ke(b,this);f.O=function(b){a.e(b)};var g=0,h=r;f.v=function(m,l){w(l)?!h&&0<d?(f.advance(d),h=n):(g++,e.push(l),!w(c)||g<c?f.forward(n):(Je(b),M(a,e))):M(a,e)}};
t.Da=function(a,b,c,d){var e=[],f=Ke(b,this);f.O=function(b){a.e(b)};var g=0,h=r;f.v=function(m,l,q){w(l)?!h&&0<d?(f.advance(d),h=n):(g++,e.push(b.G?m:q),!w(c)||g<c?f.forward(n):(Je(b),M(a,e))):M(a,e)}};t.Ua=function(a,b,c,d,e){var f=this.l().objectStore(a);return new Te(f,a,b,c,d,e)};function Ve(a,b,c,d,e,f,g,h,m){Qe.call(this,c,d,e,f,g);this.g=a;this.Na=b;this.la=this.Y=this.ka=p;this.D(h,m)}F(Ve,Qe);t=Ve.prototype;t.Ma=K("ydn.db.index.req.WebsqlCursor");t.Na=p;t.H=p;t.M=p;t.Z=p;t.Y=p;t.ka=p;t.la=p;
t.D=function(a,b){var c=this.R+":"+this.B;this.ka=[];this.Y=[];this.la=[];var d=this.z;if(b!=p)if(this.z!=p){var e=R.cmp(b,this.z.upper);if(1==e||0==e&&!this.z.upperOpen){this.v(k,k,k);return}d=ve.bound(b,this.z.upper,r,this.z.upperOpen)}else d=ve.lowerBound(b);var f=this,g=["SELECT"],e=[],h=this.B?this.B:"_ROWID_",m=G(h),l=td(this.Na),q=G(l);g.push(this.Ca?m+", "+q:"*");g.push("FROM "+G(this.R));d=Be(h,d);d.sql&&(g.push("WHERE "+d.sql),e=e.concat(d.yb));a!=p&&(d.sql?g.push("AND _ROWID_ = ?"):g.push("WHERE _ROWID_ = ?"),
e.push(a));g.push(" ORDER BY "+m+" "+(this.wa?"DESC":"ASC"));this.Ca?g.push(" LIMIT 100"):g.push(" LIMIT 1");this.sb=n;g=g.join(" ");J(f.Ma,"Iterator: "+c+" opened: "+g);this.g.executeSql(g,e,function(a,b){f.sb=r;for(var d=b.rows.length,e=0;e<d;e++){var g=b.rows.item(e);f.ka[e]=ld(g[l],f.Na.type);f.Ca?f.Y[e]=ld(g[h],f.Na.type):g!=p&&(f.la[e]=Ee(g,f.Na))}0<d?(f.M=f.ka.shift(),f.H=f.Y.shift(),f.Z=f.la.shift(),f.w(f.M,f.H,f.Z)):(J(f.Ma,"Iterator: "+c+" completed."),f.w(k,k,k))},function(a,b){I(f.Ma,
"get error: "+b.message);f.O(b);return n})};
t.forward=function(a){var b=this.R+":"+this.B;if(a===r)J(this.Ma,"Iterator: "+b+" restarting."),this.D();else if(this.oa())if(a!=p)if(x(this.Y)&&0<this.Y.length)if(a===n)this.M=this.ka.shift(),this.H=this.Y.shift(),this.Z=this.la.shift(),this.w(this.M,this.H,this.Z);else{do{this.M=this.ka.shift();this.H=this.Y.shift();this.Z=this.la.shift();if(!w(this.H)){this.D(p,a);return}if(0==Rd(this.H,a)){this.w(this.M,this.H,this.Z);return}}while(this.M!=p);this.D(p,a)}else a===n?this.D(this.M,this.H,n):this.D(p,
a);else this.w(k,k,k),this.Z=this.M=this.H=p,J(this.Ma,"Cursor: "+b+" resting.");else j(new ie("Iterator:"+b+" cursor gone."))};t.oa=function(){return this.H!=p};t.gb=s("H");t.N=s("M");t.pb=s("Z");t.seek=function(){j(new Zd)};function We(a,b){re.call(this,a,b)}F(We,De);t=We.prototype;t.q=K("ydn.db.index.req.WebSql");t.Ob=function(a,b){var c=new L;Xe(this,c,b,r,1);c.S(function(b){x(b)?M(a,b[0]):M(a)},function(b){a.e(b)})};t.Rb=function(a,b,c,d){Xe(this,a,b,n,c,d)};t.Da=function(a,b,c,d){Xe(this,a,b,r,c,d)};
function Xe(a,b,c,d,e,f){var g=P(a.a,c.L),h=c.index,m=w(h)?pd(g,h):p,h=G(m?m.keyPath:g.keyPath!=p?g.keyPath:"_ROWID_"),l="*";d?l=h:c.G&&(l=g.keyPath!=p?rd(g):"_ROWID_");var q=l+" FROM "+ud(g),u=c.c,z="",l=[];u&&(Ce(u)?(z=h+" LIKE ?",l.push(u.lower+"%")):(w(u.lower)&&(z+=" "+h+(u.lowerOpen?" > ":" >= ")+"?",l.push(u.lower)),w(u.upper)&&(z+=(0<z.length?" AND ":" ")+h+(u.upperOpen?" < ":" <= ")+"?",l.push(u.upper))),z=" WHERE ("+z+")");u="ASC";c.Zb()&&(u="DESC");var E="";w(e)&&(E=" LIMIT "+e);w(f)&&
(E+=" OFFSET "+f);e=["SELECT",q,z,"","ORDER BY "+h,u,E].join(" ");var U;U=d||c.G?function(a){return ld(je(a),m?m.type:g.type)}:function(a){return Ee(a,g)};a.g.executeSql(e,l,function(a,c){for(var d=[],e=c.rows.length,f=0;f<e;f++){var g=c.rows.item(f);d.push(U(g))}M(b,d)},function(c,d){I(a.q,"Sqlite error: "+d.message);b.e(d);return n})}t.Ua=function(a,b,c,d,e,f,g){var h=P(this.a,a);return new Ve(this.l(),h,a,b,c,d,e,f,g)};function Ye(a,b){re.call(this,a,b)}F(Ye,ze);function Ze(a,b,c,d){W.call(this,a,b,c,d)}F(Ze,W);t=Ze.prototype;t.na=function(){if(!this.p){var a=this.type();"indexeddb"==a?this.p=new Ue(this.Q(),this.a):"websql"==a?this.p=new We(this.d,this.a):"memory"==a||"localstorage"==a||"sessionstorage"==a?this.p=new Ye(this.d,this.a):j(new Kd("No executor for "+a))}return this.p};t.h=function(a,b,c,d){Ze.ba.h.call(this,a,b,c,d)};
t.ja=function(a,b){if(a instanceof Y){var c=new L,d=a.L,e=P(this.a,d);e||j(new O('store "'+d+'" not found.'));var f=a.index;w(f)&&!qd(e,f)&&j(new O('index "'+f+'" not found in store "'+d+'".'));this.h(function(b){b.Ob(c,a)},[d],N,"getByIterator");return c}return Ze.ba.ja.call(this,a,b)};
t.keys=function(a,b,c,d,e,f,g){if(a instanceof Y){var h=new L;(w(c)||w(d)||w(e))&&j(new O("too many arguments."));var m;B(b)?(m=b,1>m&&j(new O("limit must be a positive value"))):w(b)&&j(new O("limit"));var l;B(c)?l=c:w(c)&&j(new O("offset"));this.h(function(b){b.Rb(h,a,m,l)},a.stores(),N,"listByIterator");return h}return Ze.ba.keys.call(this,a,b,c,d,e,f,g)};
t.va=function(a,b,c,d,e,f,g){if(a instanceof Y){var h=new L;(w(d)||w(e))&&j(new O("too many arguments."));var m;B(b)?(m=b,1>m&&j(new O("limit must be a positive value"))):w(b)&&j(new O("limit"));var l;B(c)?l=c:w(c)&&j(new O("offset"));this.h(function(b){b.Da(h,a,m,l)},a.stores(),N,"listByIterator");return h}return Ze.ba.va.call(this,a,b,c,d,e,f,g)};
t.dc=function(a,b,c){var d=new L;(!x(a)||!(a[0]instanceof Y))&&j(new O);for(var e=[],f=0;f<a.length;f++)for(var g=a[f].stores(),h=0;h<g.length;h++)0<=Ja(e,g[h])||e.push(g[h]);for(var m=c||[],f=0;f<m.length;f++)c=m[f].b,0<=Ja(e,c)||e.push(c);this.h(function(c){function e(){for(var b=0,d=0;d<a.length;d++){var m=a[d],q=Ke(m,c);q.O=f;q.v=oa(g,b);Bc[d]=q;ga[b]=d;b++;for(var q=0,U=m.Ya.length+1-1;q<U;q++){var Q=new Ne(c.l(),m.Ya[q],m.gc[q],m.oc[q]),ta=oa(h,b);Q.Eb=ta;xb.push(Q);Ia[b]=xb.length;b++}}ha=
a.length+xb.length}function f(a){Qa(Bc);Qa(xb);d.e(a)}function g(b,c,d,e){Q&&j(new Hd);yb++;var f=a[ga[b]];ta[b]=c;Ma[b]=f.G?d:e;b=Ia[b];c=0;for(f=f.Ya.length+1-1;c<f;c++){var h=xb[b+c],m=d,l=e;w(h.d)?h.bb?h.push(l):l!=p?h.push(l[h.d]):h.push(k,k):h.push(m)}yb===ha&&U()}function h(a,b,c){Q&&j(new Hd);ta[a]=b;Ma[a]=c;yb++;yb===ha&&U();return r}function U(){yb=0;var c;c=b instanceof Re?b.Za(ta,Ma):b(ta,Ma);var e=[],f=[],g=[];if(x(c))e=c;else if(c===p)e=[];else if(w(c))C(c)?(x(c.next_primary_keys)&&
(e=c.next_primary_keys),x(c.next_index_keys)&&(f=c.next_index_keys),x(c.advance)&&(g=c.advance)):j(new he("scan callback output"));else{e=[];for(c=0;c<a.length;c++)w(ga[c])&&(e[c]=n)}var h=0;for(c=0;c<a.length;c++)if(e[c]!=p){w(ga[c])||j(new he(c+" is not an iterator."));var l=Bc[c];e[c]!==r&&!w(ta[c])&&j(new ie("Iterator "+c+" must not advance."));ta[c]=k;Ma[c]=k;w(e[c])&&w(f[c])?l.forward(e[c],f[c],!!g[c]):w(e[c])?A(e[c])?l.forward(e[c]):l.seek(e[c]):w(f[c])?l.forward(f[c]):w(g[c])&&l.forward(!!g[c]);
h++}else yb++;if(0==h){for(e=0;e<a.length;e++)Je(a[e]);Q=n;Qa(Bc);Qa(xb);M(d)}}for(var Q=r,ha,Ia=[],ga=[],ta=[],Ma=[],Bc=[],xb=[],yb=0,wd=0;wd<m.length;wd++)Oe(m[wd],this.l());b instanceof Re?b.Pa(a,function(){e()})||e():e()},e,N,"join");return d};t.cc=function(a,b,c){a instanceof Y||j(new O);P(this.a,a.L)||j(new O('Store "'+a.L+'" not found.'));c=c||N;var d=new L;this.h(function(c){var f=Ke(a,c);f.O=function(a){d.e(a)};f.v=function(a){a!=p?(b(f),f.forward(n)):M(d)}},a.stores(),c,"open");return d};
t.map=function(a,b){for(var c=a.stores(),d,e=0;d=c[e];e++)d||j(new O('Store "'+d+'" not found.'));var f=new L;this.h(function(c){var d=Ke(a,c);d.O=function(a){f.e(a)};d.v=function(c,e,g){w(e)?(c=b(a.G?y(a.index)?e:c:y(a.index)?c:g),w(c)?(A(c)&&j(new he(c)),c===p?d.forward(p):d.forward(c)):d.forward(n)):M(f,k)}},c,N,"map");return f};
t.reduce=function(a,b,c){for(var d=a.stores(),e,f=0;e=d[f];f++)e||j(new O('Store "'+e+'" not found.'));var g=new L,h=C(c)?Dd(JSON.stringify(c)):c;this.h(function(c){var d=Ke(a,c);d.O=function(a){g.e(a)};var e=0;d.v=function(c,f,m){c!=p?(h=b(h,a.G?y(a.index)?f:c:y(a.index)?c:m,e++),d.forward(n)):M(g,h)}},d,N,"map");return g};function $e(a){this.a=a}$e.prototype.a=[];
$e.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Wa(a,Ba(e,'"').split(".")),c.push(e);else if(f)c.push(Ba(e,"'"));else if(y(e))if("true"===e)c.push(n);else if("false"===e)c.push(r);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=x(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=x(e)?0<=e.indexOf(f):r,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
$e.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):k;return $e.prototype.b.apply(p,a)}};$e.prototype.toJSON=function(){return{Tokens:Dd(JSON.stringify(this.a))}};function af(a){y(a)||j(new O);this.K=a;bf(this,a);this.Ja=""}t=af.prototype;t.K="";t.Ga=N;t.Ub=NaN;t.Wb=NaN;t.Bb=r;t.Ja="";
function bf(a,b){var c=b.split(/\sFROM\s/i);2!=c.length&&j(new Od("FROM required."));var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);3!=c.length&&j(new Od("Unable to parse: "+b));a.c=c[1].toUpperCase();"SELECT"==a.c?a.Ga=N:"INSERT"==a.c?a.Ga=Xc:"UPDATE"==a.c?a.Ga=Xc:"DELETE"==a.c?a.Ga=Xc:j(new Od("Unknown SQL verb: "+a.c));var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.d=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.d=k;"("==c.charAt(0)&&
(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new Od("missing closing parentheses"));a.o=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.f=d.substring(c+6).trim(),d=d.substring(0,c)):a.f="";a.b=d.trim().split(",").map(function(a){a=Ba(a,'"');a=Ba(a,"'");return a.trim()})}
t.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.K=this.K.replace("?",a[b]);bf(this,this.K)}this.i=cf(this);if(!this.i)return this.Ja;a=this.a.length;if(b=/OFFSET\s+(\d+)/i.exec(this.a))this.Wb=parseInt(b[1],10),a=this.a.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.a))this.Ub=parseInt(b[1],10),b=this.a.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.a.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.Bb="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.Bb=r,this.n=Ba(Ba(a,'"'),"'")):this.n=k;return""};function df(a){if("*"==a.o)return p;a=a.o.split(",");return a=a.map(function(a){return a.trim()})}t.toJSON=function(){return{sql:this.K}};
function cf(a){function b(a){return Pa(c,function(b){return b.da==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.f.length)for(var e=a.f.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var m=h[1].trim(),m=Ba(m,'"'),m=Ba(m,"'");if(0<m.length){var l=h[3].trim(),l=0==l.lastIndexOf('"',0)?Ba(l,'"'):0==l.lastIndexOf("'",0)?Ba(l,"'"):parseFloat(l),h=new Ae(m,h[2],l),m=b(m);if(0<=m){var l=c,q=m;var u=c[m];if(u.da!=h.da)h=p;else{var z=k,E=k,U=k,Q=k;u.lower!=p&&h.lower!=p?u.lower>h.lower?(z=
u.lower,U=u.lowerOpen):u.lower==h.lower?(z=u.lower,U=u.lowerOpen||h.lowerOpen):(z=h.lower,U=h.lowerOpen):u.lower!=p?(z=u.lower,U=u.lowerOpen):h.lower!=p&&(z=h.lower,U=h.lowerOpen);u.upper!=p&&h.upper!=p?u.lower>h.upper?(E=u.upper,Q=u.upperOpen):u.lower==h.lower?(E=u.upper,Q=u.upperOpen||h.upperOpen):(E=h.upper,Q=h.upperOpen):u.upper!=p?(E=u.upper,Q=u.upperOpen):h.upper!=p&&(E=h.upper,Q=h.upperOpen);h=new Ae(u.da,{lower:z,upper:E,lowerOpen:U,upperOpen:Q})}l[q]=h;if(!c[m])return a.Ja='where clause "'+
g+'" conflict',p}else c.push(h)}else return a.Ja='Invalid clause "'+g+'"',p}else return a.Ja='Invalid clause "'+g+'"',p}return c}t.toString=function(){return"query:"+this.K};function ef(a,b){this.sql=b;this.a=a}ef.prototype.toJSON=function(){return{sql:this.sql}};ef.prototype.toString=ba("idb.Node:");
ef.prototype.ec=function(a,b){var c=Sa(this.sql.b)[0],d=this.sql.i,e=this.sql.Ub,e=isNaN(e)?1E6:e,f=this.sql.Wb,f=isNaN(f)?0:f,g=this.sql.n,h=df(this.sql),m=p,l=this.sql.Bb;0==d.length?m=p:1==d.length?m=ue(d[0]):j(new ge("too many conditions."));h===p||0==h.length?g!=p&&g!=this.a.keyPath?(c=new He(c,g,m,l),b.Da(a,c,e,f)):m?b.Wa(a,c,d[0].da,m,l,e,f,r):b.Ea(a,c,m,l,e,f):1==h.length?g!=p&&g!=h[0]?(d=new L,c=new He(c,g,m,l),b.Da(d,c,e,f),d.S(function(b){b=b.map(function(a){return Wa(a,h[0])});M(a,b)},
function(b){a.e(b)})):(c=new Ge(c,h[0],m,l),b.Da(a,c,e,f)):(d=new L,b.Ea(d,c,m,l,e,f),d.S(function(a){a.map(function(a){for(var b={},c=0;c<h.length;c++)b[h[c]]=Wa(a,h[c]);return b})},function(b){a.e(b)}))};function ff(a,b){ef.call(this,a,b)}F(ff,ef);
ff.prototype.ec=function(a,b){var c,d=Sa(this.sql.b)[0],e=this.sql.i,f=p;0==e.length?f=p:1==e.length?f=ue(e[0]):j(new ge("too many conditions."));var g=this.sql.d;if("COUNT"==g)f?b.za(a,d,f,e[0].da):b.za(a,d,p);else{var h,m=df(this.sql);(!m||0==m.length)&&j(new ie("field name require for reduce operation: "+g));var l=m[0];"MIN"==g?h=function(a,b){var c=a[l];return!w(b)?c:b<c?b:c}:"MAX"==g?h=function(a,b){var c=a[l];return!w(b)?c:b>c?b:c}:"AVG"==g?(c=0,h=function(a,b,c){w(b)||(b=0);return(b*c+a[l])/
(c+1)}):"SUM"==g?(c=0,h=function(a,b){return b+a[l]}):j(new ge(g));var q=Ke(f?new He(d,e[0].da,f):new He(d),b);q.O=function(b){a.e(b)};var u=0;q.v=function(b,d,e){w(d)?(c=h(e,c,u),q.advance(1),u++):M(a,c)}}};function gf(a,b){re.call(this,a,b)}F(gf,Ue);gf.prototype.q=K("ydn.db.sql.req.IndexedDb");gf.prototype.executeSql=function(a,b,c){(c=b.parse(c))&&j(new Od(c));c=Sa(b.b);if(1==c.length){var d=P(this.a,c[0]);d||j(new S(c[0]));var e=df(b);if(e)for(var f=0;f<e.length;f++)qd(d,e[f])||j(new S('Index "'+e[f]+'" not found in '+c[0]));(b.d?new ff(d,b):new ef(d,b)).ec(a,this)}else j(new ge(b.K))};function hf(a,b){this.sql=b;this.c=a;this.a=df(b)}hf.prototype.b=K("ydn.db.sql.req.websql.Node");hf.prototype.toJSON=function(){return{sql:this.sql.K}};hf.prototype.toString=ba("websql.Node:");function jf(a,b){if(a.a){if(1==a.a.length){if(C(b))return Wa(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Wa(b,a.a[d]);return c}return Ee(b,a.c)}
hf.prototype.fc=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.K,c,function(b,c){for(var h=c.rows.length,m=0;m<h;m++){var l=c.rows.item(m);if(C(l))var q=jf(d,l);e.push(q)}M(a,e)},function(b,c){I(d.b,"Sqlite error: "+c.message);a.e(c);return n})};function kf(a,b){hf.call(this,a,b)}F(kf,hf);kf.prototype.fc=function(a,b,c){var d=this;b.executeSql(this.sql.K,c,function(b,c){var d=c.rows.length;1==d?(d=je(c.rows.item(0)),M(a,d)):0==d?M(a,k):j(new Kd)},function(b,c){I(d.b,"Sqlite error: "+c.message);a.e(c);return n})};function lf(a,b){re.call(this,a,b)}F(lf,We);lf.prototype.q=K("ydn.db.sql.req.WebSql");lf.prototype.executeSql=function(a,b,c){var d=Sa(b.b);if(1==d.length){var e=P(this.a,d[0]);e||j(new S(d[0]));var f=df(b);if(f)for(var g=0;g<f.length;g++)qd(e,f[g])||j(new S('Index "'+f[g]+'" not found in '+d[0]));(b.d?new kf(e,b):new hf(e,b)).fc(a,this.g,c)}else j(new ge(b.K))};function mf(a,b){re.call(this,a,b)}F(mf,Ye);function nf(a,b,c,d){W.call(this,a,b,c,d)}F(nf,Ze);nf.prototype.na=function(){if(!this.p){var a=this.type();"indexeddb"==a?this.p=new gf(this.Q(),this.a):"websql"==a?this.p=new lf(this.d,this.a):"memory"==a||"localstorage"==a||"sessionstorage"==a?this.p=new mf(this.d,this.a):j(new Kd("No executor for "+a))}return this.p};nf.prototype.h=function(a,b,c,d){nf.ba.h.call(this,a,b,c,d)};
nf.prototype.executeSql=function(a,b){for(var c=new L,d=new af(a),e=Sa(d.b),f=0;f<e.length;f++){var g=P(this.a,e[f]);g||j(new O("store: "+g+" not exists."))}this.h(function(a){a.executeSql(c,d,b||[])},Sa(d.b),d.Ga,"executeSql");return c};function of(a,b,c){X.call(this,a,b,c)}F(of,X);t=of.prototype;t.qa=function(a){return new Ze(this,this.i++,a,this.a)};t.Dc=function(a,b,c){return this.b.cc(a,b,c)};t.Ec=function(a,b,c){return this.b.dc(a,b,c)};t.map=function(a,b){return this.b.map(a,b)};t.reduce=function(a,b,c){return this.b.reduce(a,b,c)};function pf(a,b,c){X.call(this,a,b,c)}F(pf,of);pf.prototype.qa=function(a){return new nf(this,this.i++,a,this.a)};pf.prototype.executeSql=function(a,b){return this.b.executeSql(a,b)};function Z(a,b,c,d){W.call(this,a,b,c,d)}F(Z,nf);var qf={name:"default_text_store",keyPath:"id",type:"TEXT"};Z.prototype.f=function(a,b,c){var d=this.t().wb||p;d&&(b=d.Jc(a,b,c));c="default_text_store";Bd(this.a,"default_text_store")||(this.a.a()?c=qf:j(new O("key-value store not in used.")));return this.La(c,{id:a,value:b})};D("ydn.db.TxStorage.prototype.setItem",Z.prototype.f);Z.prototype.n=function(a){return this.clear("default_text_store",a)};D("ydn.db.TxStorage.prototype.removeItem",Z.prototype.n);
Z.prototype.getItem=function(a){var b=this.ja("default_text_store",a),c=new L,d=this;b.X(function(b){if(w(b)){b=b.value;var f=d.t().wb||p;f&&w(b)&&(b=f.Ic(a,b));M(c,b)}else M(c,k)});b.Oa(function(a){c.e(a)});return c};D("ydn.db.TxStorage.prototype.getItem",Z.prototype.getItem);Z.prototype.toString=function(){var a="TxStorage:"+this.t().Q(),b=this.u,c=this.C.sa;return a+":"+this.c+(b?"["+b+"]":"")+":"+this.aa()+(c?"["+c+"]":"")};function $(a,b,c){X.call(this,a,b,c)}F($,pf);$.prototype.qa=function(a){return new Z(this,this.i++,a,this.a)};$.prototype.getItem=function(a){return this.b.getItem(a)};D("ydn.db.Storage.prototype.getItem",$.prototype.getItem);$.prototype.pa=function(a,b,c){return this.b.f(a,b,c)};D("ydn.db.Storage.prototype.setItem",$.prototype.pa);$.prototype.lc=function(a){return this.b.n(a)};D("ydn.db.Storage.prototype.removeItem",$.prototype.lc);
$.prototype.toString=function(){var a="Storage:"+this.Q();return this.b?a+":"+this.b.aa():a};function rf(a,b){Re.call(this,a,b)}F(rf,Re);rf.prototype.Pa=ba(r);rf.prototype.Za=function(a){function b(e){w(a[e])?(d=r,c[e]=n):(c[e]=r,0<=e-1&&b(e-1))}var c=[],d=n;b(a.length-1);d&&(c=[]);return Se(this,c,a)};function sf(a,b){Re.call(this,a,b)}F(sf,Re);sf.prototype.Pa=ba(r);function tf(a){var b=[],c=a[0];if(c==p)return{advance:[],Pb:p,Hb:r,a:r};for(var d=n,e=r,f=c,g=[],h=1;h<a.length;h++)if(a[h]!=p){var m=Rd(c,a[h]);g[h]=m;1===m?d=r:-1===m&&(d=r,e=n,1===Rd(a[h],f)&&(f=a[h]))}else d=r,e=n;if(d)for(h=0;h<a.length;h++)a[h]!=p&&(b[h]=n);else if(e)for(h=0;h<a.length;h++)a[h]!=p&&1===Rd(f,a[h])&&(b[h]=f);else for(h=1;h<a.length;h++)1===g[h]&&(b[h]=c);return{advance:b,Pb:f,Hb:d,a:e}}
sf.prototype.Za=function(a){var b=tf(a);return Se(this,b.advance,a)};function uf(a,b){Re.call(this,a,b);this.ia=[];this.ac=[];this.xb=r}F(uf,Re);t=uf.prototype;t.ia=[];t.ac=[];t.xb=r;t.Pa=function(a){1==a.length&&j(new he("number of iterators must be more than one."));2<a.length&&(this.xb=n);Qa(this.ia);Qa(this.ac);return r};
t.Za=function(a){var b,c=r,d;this.xb?(d=tf(a.slice(1)),b=d.advance,c=d.Hb,d=d.Pb):a[1]!=p?(b=[n],d=a[1],c=n):b=[];if(0==b.length)return Qa(this.ia),[];for(var e=this.ia.length-1;0<e;e--)-1!=Rd(this.ia[e],d)&&this.ia.splice(e,1);c?b.unshift(n):(this.ia.push(a[0]),b.unshift(p));return b};D("ydn.db.KeyCursors",Ge);D("ydn.db.ValueCursors",He);Y.prototype.continued=Y.prototype.f;Y.prototype.count=Y.prototype.uc;Y.prototype.done=Y.prototype.ic;Y.prototype.getKeyRange=Y.prototype.kc;Y.prototype.getIndexName=Y.prototype.vc;Y.prototype.getStoreName=Y.prototype.wc;Y.prototype.indexKey=Y.prototype.xc;Y.prototype.isReversed=Y.prototype.Zb;Y.prototype.isUnique=Y.prototype.zc;Y.prototype.isKeyOnly=Y.prototype.yc;Y.prototype.key=Y.prototype.key;Y.prototype.resume=Y.prototype.rc;
Y.prototype.reset=Y.prototype.Ac;D("ydn.db.Storage",$);$.prototype.scan=$.prototype.Ec;$.prototype.map=$.prototype.map;$.prototype.reduce=$.prototype.reduce;$.prototype.open=$.prototype.Dc;$.prototype.setItem=$.prototype.pa;$.prototype.getItem=$.prototype.getItem;Z.prototype.scan=Z.prototype.dc;Z.prototype.map=Z.prototype.map;Z.prototype.reduce=Z.prototype.reduce;Z.prototype.open=Z.prototype.cc;Z.prototype.setItem=Z.prototype.f;Z.prototype.getItem=Z.prototype.getItem;Te.prototype.key=Te.prototype.N;
Te.prototype.indexKey=Te.prototype.gb;Te.prototype.value=Te.prototype.pb;Te.prototype.update=Te.prototype.Fc;Te.prototype.clear=Te.prototype.clear;D("ydn.math.Expression",$e);$e.prototype.evaluate=$e.prototype.b;$e.prototype.compile=$e.prototype.c;$e.parseRpn=function(a){return new $e(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};$e.parseInfix=function(){j(new Zd("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here."))};D("ydn.db.algo.NestedLoop",rf);D("ydn.db.algo.AbstractSolver",Re);
D("ydn.db.algo.ZigzagMerge",uf);D("ydn.db.algo.SortedMerge",sf);})();

            //@ sourceMappingURL=dev-ydn.db.js.map
        